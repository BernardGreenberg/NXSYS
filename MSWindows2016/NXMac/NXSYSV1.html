<html>

<head>
<style>
.def {
    color: #0AA;
    text-decoration: none;
}

.def:hover {
    color: #0F0;
    decoration: none;
}

.DocPopup {
  position:absolute;display:none;background-color:#cff;border:1px solid #039;font-family:sans-serif;font-size:80%;}

.rwarn {color:"#D00";}

</style>
<script>
function mmhandler(e) {
    LastX = e.pageX;
    LastY = e.pageY;
}

window.onmousemove = mmhandler
LAST_ELT= 0
function defenter(elt) {

   tag = elt.getAttribute("dref").substr(1)
   pu = document.getElementById(tag);
 LAST_ELT=pu
   pu.style.top = LastY + "px"
   pu.style.left = LastX + "px"
   pu.style.width = "300px"
   pu.style.display="block";
}

function defleave() {
   LAST_ELT.style.display = "none"
}

</script>
<meta name=Title content="">
<meta name=Keywords content="">
<meta http-equiv=Content-Type content="text/html; charset=macintosh">


<style>

</style>

</head>

<body lang=EN-US style='tab-interval:.5in;text-justify-trim:punctuation'>

<div class=WordSection1>

<h1>NXSYS Subway Signalling Simulator</h1>
<p><span> <b>NXSYS</b> is a New York Subway-style NX/UR
Interlocking simulator for Microsoft(r) Windows(tm) <span style='font-weight:bold;color:#0A0'>now available for the Apple&#x2122; Macintosh&#x2122; as well.  This document still accurately describes the basics; see <a href='MacNXSYS.html'>here</a> for differences and Mac specifics</span>. Please click here on <a href="#introduction">Introduction</a> if you're new to <b>NXSYS</b> or subway signalling.</span></p>

<p><b>NXSYS</b><span> is a tool for learning about signalling and switching on the New
York Subway System by actually controlling moderately complex arrangements of
tracks and signals the way they are actually controlled in real life. <b>NXSYS</b>
facilitates analysis and observation of, and experimentation with, signalling
behavior right down to the level of individual electrical relays. This helpfile contains complete
information on all types of signals and all related concepts as employed on the
New York system (and often, on many other rapid transit systems).</span></p>

Please check the <b>NXSYS</b> World Wide
Web page (<b><a href="http://www.nycsubway.org/wiki/NXSYS,_Signalling_and_Interlocking_Simulator">http://www.nycsubway.org/wiki/NXSYS,_Signalling_and_Interlocking_Simulator</a></b>) regularly for updates and bug fixes.</span></p>

<p>Conditions of use, copyright/trademark notices, and credits, may be found in <a href="#credits">Section 7.0</a>. Latest changes may be found in <a href="#snew">Section
6.0.</a></span></p>

<p><u><a href="#introduction">1.0 Introduction</a></u><span>                           <b><a name="cont_nx_xlkg"/>Status:
1 July 2001<span style='color:#0A0'>, for Mac version November 2014</span></b><br/>   <a href="#definitions">1.1 Definitions</a><br/>   <a href="#startup">1.2 Getting Started</a><br/>   <a href="#whatsee">1.3 What you see</a><br/>   <a href="#litup">1.4 What the lights and lit-up things mean</a><br/>   <a href="#mouse">1.5 Mice in the tunnels</a><br/>   <a href="#fullsig">1.6 Full Signal Display</a><br/><a href="#menu">2.0
Menu Commands</a><br/>   <a href="#demos">2.1 Demo system</a><br/>   <a href="#trains">2.2 Train system</a><br/>   <a href="#threed">2.3 3-D Cab View Graphics</a><br/>   <a href="#scripts">2.4 Scripting and OLE Automation</a><br/><a href="#ifeat">3.0 Signalling and Interlocking Features</a><br/>   <a href="#clength">3.1 Control Length -- the
Purpose of Signals</a><br/>   <a href="#sigtype">3.2 Types of Signals</a><br/>   <a href="#nxo">3.3 Basic NX Operation</a>    <b><span>MUST READ THIS!</span></b><br/>   <a href="#sigrout">3.4 Signal Calling (Requesting)</a><br/>   <a href="#fleet">3.5 Auto-cancel and Fleeting</a><br/>   <a href="#slock">3.6 Switch Locking</a><br/>   <a href="#aplock">3.7 Approach and Time Locking</a><br/>   <a href="#routl">3.8 Route Locking</a><br/>   <a href="#timesig">3.9 Time Signals</a>   (&quot;Why are those three
red?&quot;)<br/>   <a href="#stops">3.10 Automatic Train Stops</a> (&quot;Nasty little triangles&quot;)<br/>   <a href="#callon">3.11 Home Signal Call-On</a><br/>   <a href="#auxkeys">3.12 Auxiliary Switch (Test) Keys</a> (&quot;Squares with N's
and R's&quot;)<br/>   <a href="#lockconflicts">3.13 Locking Conflict panel indications</a><br/>   <a href="#hairy">3.14 Advanced Locking Scenarios</a><br/>   <a href="#btob">3.15 Back-to-Back Signals</a><br/><a href="#scenarios">4.0
Interlocking Scenarios</a><br/>   <a href="#progman">4.1 Progman St. Interlocking</a><br/>   <a href="#islington">4.2 Islington (Toronto) Interlocking</a><br/>   <a href="#design">4.3 Designing Scenarios - NOT</a><br/><a href="#relays">5.0 Relays and Relay Logic</a> (&quot;Can safely ignore
this&quot;)    <br/><a href="#snew">6.0 What's new</a><br/><a href="#credits">7.0 Credits and Conditions of Use</a><br/>   <a href="#author">7.1 About the Author</a></span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='introduction'/><h2>1.0 Introduction</h2>

<p><span>An <b>interlocking</b> is a collection of railroad tracks and
traffic lights that work together with a person controlling them to effect safe
train movement. It is so called
because the controls of these items are so interlocked that only safe sequences
of moves and states are possible. The controls appear on a &quot;panel&quot; or &quot;interlocking
machine&quot; in a <b>tower,</b> operated by a <b>towerman.</b> The panel looks like a model of the
tracks being controlled with buttons, switch keys and lights on it. In earlier
times, a mechanical frame with actual mechanical <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">levers,</span>
physically interlocked, was employed. In modern interlockings, the physical buttons and switch keys are not interlocked,
but their effects and operation are restricted to safe moves by electrical
logic.</span></p>

<p><span>Interlocking is a kind of counterpoint for subway tracks; each track
adds about as much complexity as a line of a fugue. The game is to sufficiently understand the
complex interactions between signals, switches, and trains, as must a real
towerman, to be able to operate the the interlocking at all.</span></p>

<p><span>This program, <b>NXSYS,</b> simulates entire interlockings, not just
the panel, but all the logic implemented in electromechanical <a href="#relays">relays,</a> relay by relay. Relays are still used in interlocking
instead of computers, for safety reasons. What you will see when you read in a file is the &quot;panel&quot; of a
moderate-size interlocking under your control, representing of 3500 feet of an
imaginary 4-track subway line.</span></p>

<p><span>The track board is designed to be as similar as possible to a real
&quot;NX/UR&quot; panel, the kind in use in New York City since the 50's and
still being installed, an object of <a href="#author">the
author's</a> intense intellectual concentration during his youth. You can move imaginary trains around
with the <a href="#mouse">mouse</a>, control the
&quot;traffic lights&quot; and track routes, and see how they all
interact. This help file reflects
the current implementation status. A status date appears on the <a href="#cont_nx_xlkg">Contents</a>
screen.</span></p>

<p><b>NXSYS</b><span> does not simulate any particular interlocking, but rather,
&quot;runs&quot; simulations of particular interlockings read in from files
defining them. Currently, two such <a href="#scenarios">sample interlockings</a> are
supplied. These files define the track
and signal layout of the interlocking, and all its logic as traditional <a href="#relays">relay-logic circuitry.</a></span></p>

<p><span>A major reward of <b>NXSYS</b> is much like that of flight
simulators: learning the rules of
interlocking hands-on without worsening transportation chaos in New York City
or entering upon tracks or other dangerous terrain. The interlockings implemented in NXSYS,
like any other NX interlockings, also provide the additional reward of watching
them figure out how to work themselves in a safe order in response to your
routing requests.</span></p>

<p><b>NX</b><span> stands for &quot;entrance-exit,&quot; the generic technique of
selecting routes by choosing their endpoints, invented in 1937 (and a trademark
of General Railway Signal, Inc., present-day successor Alstom Corp.) which is
what NXSYS implements. <b>UR</b> is
&quot;Union Route,&quot; the trademark of the Union Switch and Signal company
(which signaled the IRT) for their NX interlocking implementation, which is
slightly different than the GRS (BMT) &quot;NX&quot; implementation.</span></p>

<p><b>NXSYS</b><span> includes a <a href="#threed">three-dimensional view
window</a> which views the track as the motorman would see it, as all
signals and other apparatus respond to your operation of the interlocking
panel.</span></p>

<p><span>As the further use non-technical language such as &quot;traffic
lights&quot; is undesirable, please proceed to <a href="#definitions">Definitions</a>
at once. You do not have to
understand them all at once. Many
critical definitions are available as <a href="#bogolink">hyperlinks such as this</a>
(click on them to see the definition) throughout the document. The &quot;&lt;&lt;&quot; and
&quot;&gt;&gt;&quot; browse buttons are operative for the entire document.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='definitions'/><h2>1.1 Definitions</span><span></h2>

<p><span>As these terms are used throughout, it is important that you learn
them. These are standard railroad
signalling terms, not terms peculiar to <b>NXSYS.</b> When they appear in the
text, they will be in red to remind you that you
can look them up here. You may hit
the </span><b>Definitions</b><span> button at any
time while in Help, or hit Alt-D to get back here. Some of the more critical and
non-obvious ones are available as hypertext links <a href="#bogolink">like this</a>
throughout the text. The terms are not listed alphabetically, but in order of
importance.</span></p>
<table>
<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Signal
       </td>
       <td>A
&quot;Subway traffic light.&quot; Formally, an array of colored lamps whose configuration (different
colors being lit or dark) convey information about routes and the safety of the
track ahead to train operators. See
<a href="#clength">The Purpose of Signals</a> for a
detailed consideration.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Switch
       </td>
       <td>A
track device by which a train can go from one track to another; the place where
two tracks join. Non-technical
people sometimes call it a &quot;switch-track&quot;, and technical people a
&quot;turnout.&quot;</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Track Section
       </td>
       <td>(or track circuit)       A
length of track between, more or less, two signals (actually two <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_IJ">insulated
joints.</span>) All signal-controlled track is divided into track sections.<br/><img align='right' src='trkij.bmp'/></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Interlocking
       </td>
       <td>A collection of
signals and switches, with associated track and their control equipment, so
interlocked with each other as to be operable only in safe and logical
sequences of operations.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Tower
       </td>
       <td>A
room or building at a given interlocking with the control apparatus for it,
from which the towerman controls it. Usually, the relevant track is visible
from the tower.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Towerman
       </td>
       <td>The man or woman in the tower controlling the interlocking.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          NX
       </td>
       <td>For
&quot;e<b>N</b>trance-e<b>X</b>it.&quot; A type of <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_xlkg">interlocking</span> control where routes
are specified by identifying their endpoints. See <a href="#nxo">Basic
NX Operation.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Called
       </td>
       <td>(or Requested
)   A signal is called,
or requested, if the towerman allows it to be other than red.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Clear
       </td>
       <td>A
signal is &quot;clear&quot; when it is not red, and permits movement.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Occupied
       </td>
       <td>A
track section is &quot;occupied&quot; if there is any portion of a train in any
of it. The opposite is
&quot;vacant.&quot;</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Home Signal
       </td>
       <td>A two-headed signal under control
of the interlocking/towerman as well as track occupancy and other
conditions. See <a href="#sigtype">Types of Signals.</a> Home signals are said to be <i>absolute</i>
because their <a href="#stops">stops</a> cannot be driven
down by <a href="#ak">automatic key-by.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Automatic Signal
       </td>
       <td>A
signal controlled only by train movement, i.e., not under the control of the
interlocking and towerman. See <a href="#automatic">the discussion under &quot;Types of Signals&quot;</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Approach Signal
       </td>
       <td>A
single-headed under control of the interlocking, as well as by track occupancy
and other conditions. Unlike a home signal, it never protects a switch or potential
conflicting movement. See <a href="#apsig">Signal Types</a> and <a href="#aplock">Approach locking.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Dwarf Signal
       </td>
       <td>A low, interlocked signal
with only red and yellow lenses. Dwarf signals are used to direct low-speed reverse and yard
movements. See the <a href="#dwarf">discussion under &quot;Types of Signals&quot;</a>
and the section on <a href="#clength">control lengths.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Marker Signal
       </td>
       <td>A signal with only red lights, more or
less the subway equivalent of a &quot;Do not enter&quot; sign.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          GK Light
       </td>
       <td>(for siGnal indiKator) -- the
symbol on the panel representing a signal.<br/><img align='center' src='gk.bmp'/></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Insulated Joint (IJ)
       </td>
       <td> </span><span>            A
small section of an insulating substance, now usually fiberglass or fiber,
electrically separating two <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track sections</span> from each
other.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Station number
       </td>
       <td>A
number indicating physical location of a signal or IJ, in 100's of feet from an
arbitrary-selected reference point.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Lever number
       </td>
       <td>A number used within the
context of an interlocking to talk about a switch or signal under its
control. See <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever.</span></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Diverging route
       </td>
       <td>A
path diverging from a main track via a switch, i.e., when a switch &quot;has been
thrown.&quot;<br/><img align='right' src='divrt.bmp'/></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Main route or
       </td>
       <td>normal route  The opposite of <span>diverging
route, the &quot;not thrown&quot; path. </span></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Points
       </td>
       <td>The
very tippy-toes of a switch that swing back and forth against the main track
when the switch moves. On the
interlocking panel, where the switch intersects the main track.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Lever
       </td>
       <td>A
control for a switch or signal, in former times an actual, physical lever. The lever for a signal normally forces
it to be red, and can only <i>permit</i> (request)
it to be otherwise, that is, clear, if
operated. In an NX interlocking
such as NXSYS, levers are imaginary and simulated by <a href="#relays">relay logic.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Trailing-point
       </td>
       <td>switch         A
switch, when viewed from a certain track in a certain direction, which merges
movement into that track in that same direction. If approached in the opposite direction
on the same track, it would be a facing-point switch.<br/><img align='right' src='fpsw.bmp'/></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Facing-point
       </td>
       <td>switch          A
switch, when viewed from a certain track in a certain direction, which allows a
choice of tracks for movement in that same direction. If approached in the opposite direction
on the same track, it would be a <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_trps">trailing-point switch.</span></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Control length
       </td>
       <td>of a signal. That length of track beyond the signal,
starting at it, which &quot;controls&quot; the signal. That is, if there is a
part of a train anywhere within it, the signal will be red. See the section on <a href="#clength">control lengths.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Overlap
       </td>
       <td>(of control length). <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">Control lengths</span> often
(always, in New York) extend from the signal to which they belong up to and
beyond the next signal.  The
portion beyond the next signal, which coincides with the near end of that
signal's control length, is called &quot;overlap.&quot;</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Route
       </td>
       <td>A
cleared path for a train over an interlocking, from an entrance
point to an exit point. See <a href="#nxo">Basic
NX Operation.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Entrance
       </td>
       <td>The
location (actually always that of a signal) at the beginning of a route.  The
route is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiated</span> by the towerman by pressing the button at (in
NXSYS, mousing) the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK Light</span> of the signal there.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Exit
       </td>
       <td>The
location at the end of a route.  Routes in an NX (eNtrance-eXit)
interlocking are selected by choosing an entrance and
an exit. There is always a signal
at an exit.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Exit Light
       </td>
       <td>A
white light on the interlocking panel that lights up at each potential exit
when an entrance is selected (a route is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiated</span>).<br/><img align='left' src='exit.bmp'/></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Initiate
       </td>
       <td>To
begin the process of selecting a route by choosing the signal at its entrance (by mouse, in NXSYS). See <a href="#nxo">Basic
NX Operation.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Entrance Light
       </td>
       <td>A white light on the interlocking panel
that looks just like an <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit light,</span> which lights up at the point
of <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiation</span> when
an exit has been selected and the route is
determined.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Complete
       </td>
       <td>To
finish the process of selecting a route by choosing the point of its exit (by mouse, in NXSYS).</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Cancel
       </td>
       <td>To
dis-establish an <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiation</span> or route or restore the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever</span>
of a signal to normal, forcing the signal red, all the same operation in an NX
interlocking, accomplished in NXSYS by clicking left on the initiating signal.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Grade Time (GT)
       </td>
       <td> </span><span>                A
signal which is normally red, and is cleared by trains approaching it
sufficiently slowly. See the
section <a href="#timesig">Time Signals.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Station Time (ST)
       </td>
       <td> </span><span>              A
signal which, when approached sufficiently slowly, &quot;cuts back&quot; its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control
length</span>, allowing trains to close in on each other. See the section
on <a href="#stationtime">Station Time.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Approach locking
       </td>
       <td>A
technique whereby the interlocking does not &quot;believe&quot; that a signal
is not a potential dangerous source of trains, even if cancelled, when there is
a train in front of it. See the
later section on <a href="#aplock">approach locking.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Time locking
       </td>
       <td>A technique where approach locking is released after a long time
interval has passed. See the later
section on <a href="#aplock">approach locking.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Auto-cancel
       </td>
       <td>The automatic
cancellation of a signal and a route by train motion past it. See <a href="#fleet">Auto-cancel
and Fleeting</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Fleet
       </td>
       <td>To
effect a signal <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiation</span> such that subsequent train motion
does not cancel it or its route.  See <a href="#fleet">Auto-cancel
and Fleeting</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          End-to-end
       </td>
       <td>(or &quot;through
routing&quot;) A feature where by several signals may be <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiated</span>
and their routes completed by initiating the first and completing the
last. See <a href="#nxo">Basic NX Operation.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Train Stop
       </td>
       <td>(or stop or trip ) A trackside device associated with a
signal whose <img align='right' src='stop.bmp'/> function is to trip a
train if the latter tries to pass the former when it is red.  Stops are (optionally) represented by
little red (or yellow) triangles in NXSYS, and can be seen in caricature in the
<a href="#fullsig">Full Signal Display.</a> See <a href="#stops">Train
Stops.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Trip
       </td>
       <td>What
a raised <a href="#stops">stop</a> does to a train,
causing a full emergency brake application, hopefully bringing the train to a
screeching halt. As a noun, same as
<a href="#stops">train stop.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Automatic Key-By (AK)
       </td>
       <td> </span><span> A feature of <a href="#automatic">automatic signals</a> and <a href="#apsig">approach
signals</a> that allows a motorman who brings the train to a creeping halt
to pass a red signal: the train
passing the signal at creeping speed drives the stop down.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          UR Exit Feature
       </td>
       <td>(Not
a standard term, but a standard UR feature) Being able to choose a route by
choosing entrance and exit
signal buttons, with no need for special exit buttons, or in the case of
<b>NXSYS,</b> clicking on <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit lights.</span> In fact, General Railway Signal's
&quot;NX&quot; (as opposed to UR) panels have used this feature for some years
now.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Relay
       </td>
       <td>An
electromechanical logic element consisting a set of electrical switches (or
&quot;contacts&quot;) operated simultaneously by an electromagnet. See <a href="#relays">the full discussion</a> for more
information.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Call-on
       </td>
       <td>A
manoeuver where the towerman offers a special indication for a train to close
in on another train and pass a red <a href="#home">home
signal.</a> The towerman must
take special action, a special indication on the signal is given, and the
motorman must press a button on the signal to lower the <a href="#stops">stop.</a> See <a href="#callon">call-on.</a></span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Off-side
       </td>
       <td>Refers
to a <a href="#stops">train stop</a> intended for a train
moving in the other direction than a movement under discussion. Such stops have to be cleared for
movements in the direction under discussion.</span>
       </td>
    </tr>

<tr style="padding:40px">
       <td style='width:150;color:#900'>
          Auxiliary Switch keys or
       </td>
       <td>Switch test keys                   Miniature
levers on the interlocking panel which allow direct, manual call of switches.
See <a href="#auxkeys">the section on them.</a></span>
       </td>
    </tr>
</table>
<span><br clear=all
style='page-break-before:always'>
</span>

<a name='startup'/><h2>1.2 Getting Started</h2>

<p><span>Starting up the simulator from Windows leaves you with a black board
and one meaningful command option. You must read in the definition of an <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_xlkg">interlocking</span> from a
<b>.tko</b> file, two of which are provided with <b>NXSYS</b> The <b>.tko</b>
file defines the track and signal layout and the <a href="#relays">relay
logic</a> that define the interlocking. It is in 80x86 machine language, and was
compiled by the <b>NXSYS Relay Compiler</b> from a Lisp-like interlocking and
logic definition language.</span></p>

<p><span>We supply the definitions of two interlockings with <b>NXSYS.</b>
Please see <a href="#scenarios">Supplied Interlocking Scenarios</a>
for a discussion of them. We
recommend <a href="#progman">Progman St.</a> for those new
to this program or new to the subject matter.</span></p>

<p><span>Read in the <b>prgman32.tko</b> file using the </span><b>File|Open</b><span> command on the menu bar. (You may also place the pathname of the <b>.tko</b>
file as a command argument on the Windows command line in the Program Manager
entry for <b>NXSYS</b> for automatic startup of a given layout.)  <span style='color:#0A0;font-weight:bold'>On the Macintosh, read in progman.trk in the 'Progman' folder with the File|Open menu item.</span></p>

<p><span>Now you will see the control panel for <a href="#progman">Progman St. Interlocking.</a> Proceed with caution to <a href="#whatsee">What you see before you.</a></span></p>

<p><span>If you have the proper software components available and locatable
(see <a href="#threed">the section on this feature</a> for
more explanation and information), you will also see a three-dimensional view
of the interlocking. As this is an
optional feature -- see <a href="#threed">3-D Cab View window</a>
for more information about it.</span></p>

<p><span>If you have not seen the demo system, try selecting <b>demo1-32bit.xdo</b>
from the </span><b>Demo</b> item of the <b>File</b><span> menu. See <a href="#demos">Demo System</a> for more
information on this.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='whatsee'/><h2>1.3 What you see before you</h2>

<p><span><img align='right' src='rboard24.bmp'/>Once you have read in <b>prgman32.tko </b> you will see the interlocking panel for
&quot;Progman St.&quot;, a medium-sized interlocking. The gray lines represent the tracks --
there are no trains when you start. North is to your right. The
little circle-with-pedestal symbols, some of whose circles may be lit, are
called <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK Lights,</span> and represent <b>signals,</b> the &quot;traffic
lights&quot; of the subway.<br/><br/><img align='center' src='gk.bmp'/></span></p>

<p><span><br/><img align='right' src='trkij.bmp'/>The tracks are divided into <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track sections</span>
-- you can see the little gaps between the sections, known as IJ's, or <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_IJ">Insulated
Joints</span>. You can see one
where every signal appears. The
IJ's, and the signals at them, have numbers called <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_sno">station numbers</span>,
which are measured in hundreds of feet along the route from some
arbitrarily-chosen reference point, often the origin of the particular subway
line or its construction contract. In the current default track layout, these are all in the 700's -- that
is what the numbers in the 700's mean.</span></p>

<p><span>The signals can have one or two numbers associated with them, the
station number, already discussed, and a <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">Lever Number,</span> always
even, which, in the default layout, is a small number. The station number refers to the
physical location of the signal, the lever number is that by which the
interlocking defines the signal. The lever number appears next to the signal
head (the round part of the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light.</span></span></p>

<p><span>The switches have lever numbers, too, which are always odd. As the two ends of a switch are
controlled by the same &quot;lever&quot;, they are typically numbered A and B
with the same number. That is what
the numbers at the points of the switch mean.</span></p>

<p><span>Under the track model you will see a number of <a href="#auxkeys">auxiliary switch keys</a> <img align='right' src='auxkeys.bmp'/>. Written under each is the number of the
switch it controls. Normally, you
do not need to use these, but you can determine <a href="#slock">switch
locking</a> by observing them.</span></p>

<p><span>There is a horizontal scroll bar at the bottom of the window. Only the tabs on the end are active -
the thumbscroll and the page left-right bars are not enabled. You can scroll a little bit to see all
of large interlockings. You can also use the arrow and PageUp/PageDown keys to
scroll. Real interlocking panels are much bigger than a computer screen.<br
clear=all style='page-break-before:always'>
</span></p><a name='litup'/><h2>1.4 What the various lit-up things mean</h2>

<p><span><img align='right' src='rboard24.bmp'/><span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">Track sections</span> are normally
dark (gray). When a track section
is lit up as a line of red dots, that means it is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied,</span> i.e.,
a train or portion of a train is in it. When it is lit up in white dots, that means that a route is lined up
over it, i.e., it is ready for train movement.</span></p>

<p>The pieces of track being and representing switches are divided in
half, between the two track sections which they connect, and will indicate red
or white or dark along with those sections when the switch is set to a <span>diverging route. A switch which is lit up in <b>blue</b> is thrown (set to diverging
route), but neither <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied</span> nor part of a route. <img align='right' src='swdiv.bmp'/> This is a non-standard feature not
present in real interlockings -- this is because it is sometimes interesting to
know switch position in these cases, even though there is no necessity to know
it. Also, this feature was useful
before full NX control was implemented in NXSYS.</span></p>

<p><span>When a switch is moving (changing position), the switch reverse
position on the interlocking panel flashes red. This takes several seconds, and other
things may be going on simultaneously. If the <a href="#auxkeys">auxiliary switch keys</a>
are calling for a switch, it will light steady white in the position to which
it has been called.</span></p>

<p><span onmouseenter='defenter(this);' onmouseleave='defleave();' class='def' dref='#DEF_GK'>GK lights</span><span> represent signals. Although on real NYCTA interlocking panel <a href="#automatic">automatic
signals</a> have no GK lights, <b>NXSYS</b> supplies them anyway for
your edification. In short, the GK
light reports the signal's aspect: yellow means &quot;clear&quot; (i.e., the
actual aspect is yellow or green), and red means &quot;red&quot;. However, if the represented signal is <i>not</i>
an automatic signal, i.e., <i>is</i> under the control of the interlocking, the
GK will be <i>dark</i> unless the signal is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called,</span> or an <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiation</span>
has been punched at that signal. (If the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span> is dark, and the
signal is not <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called,</span> it is a certainty that the actual signal
will be red.) A <a href="#home">home</a> or <a href="#apsig">approach
signal</a> may also be <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_fleet">fleeted,</span> <img align='right' src='fleet.bmp'/> in which
case a little green line appears by the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span> under the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever</span>
number. See <a href="#fleet">Auto-cancel and Fleeting</a> for more about that.</span></p>

<p><span>Some signals <img align='left' src='stop.bmp'/> will have little red triangles sitting
on the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track sections</span> next to them. These are the symbol for <a href="#stops">train stops,</a> which are devices that
cause trains attempting to pass red signals to grind to a halt. See <a href="#stops">train
stops</a> for more information on this.</span></p>

<p><span>It is possible to see what the actual signal looks like, and watch
it change in real time, by popping up the <a href="#fullsig">Full
Signal Display</a>.</span></p>

<p>When a <span>route is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiated,</span>
that is, the beginning of a path over the interlocking is selected, a bright
white <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit light</span> will light up in the track section at each exit allowable at that time. By selecting the exit with the mouse,
the towerman selects and completes the route. That is the basic theory of NX
interlocking.</span></p>

<p><span>Under the track model are the <a href="#auxkeys">auxiliary
switch keys</a> <img align='right' src='auxkeys.bmp'/>. These are not used in normal operation.  See <a href="#auxkeys">the
section about them</a> for more information.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='mouse'/><h2>1.5 Using the Mouse to Control the Interlocking</h2>

<p><span>There are five kinds of mouse-sensitive objects in <b>NXSYS:</b> <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track
sections</span>, switches, signals, <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit lights</span> and
<a href="#auxkeys">auxiliary switch keys.</a> The mouse is
used instead of the metal or plastic buttons on a real interlocking panel. The left and right mouse buttons effect
the most common operations on each type of object; clicks with modifier keys (<b>shift</b>
or <b>control</b>) are used for less common operations. Finally, <b>control click-right</b> on
any object (except exit lights) offers a so-called <a href="#controlright">context menu</a> of all possible operations on the object,
elementary and advanced, although its use is rarely necessary (documentation of
this may be found <a href="#controlright">below</a>).</span></p>

<h3>Clicks on Signals</h3>

<p><span>Clicking <b>left on a signal's</b> <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span> has an
effect which is different for different types of signals (See <a href="#sigtype">Types of Signals</a>), and differs
depending upon the state of the signal. The basic idea is to toggle the signal's <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">requested (or called)</span>
state, i.e., work towards clearing it if it is not clear, and <i>vice-versa.</i> More specifically, clicking left on the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK
light</span> for a(n)<br/><br/>    1. <b><a href="#automatic">automatic signal</a></b> or <b><a href="#marker">marker signal</a></b> has no effect.<br/>    2. <b><a href="#apsig">approach signal</a></b> attempts to call
(and clear) it if it is not <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called,</span> and unconditionally
&quot;cancels&quot; it, i.e., de-routes it, if it is.<br/>    3. <b><a href="#home">home signal</a></b> or <b><a href="#dwarf">dwarf signal</a></b> <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiates</span>
a route, if possible, at that signal if it is not initiated or <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called,</span>
and unconditionally &quot;cancels&quot; a route or <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiation</span>
from that signal otherwise, forcing the signal to &quot;red,&quot; although <a href="#routl">route locking</a> might hold the route in
spite of this.<br/><br/>Note that <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">calling</span> or <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiating</span>
a signal will not necessarily clear it; for a home or dwarf signal, it is guaranteed not to until an exit is
selected and all switches have fully moved, and its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control length</span>
is clear of trains.</span></p>

<p><b>Note also</b><span> that the interlocking might refuse to initiate at a given signal if
it believes that no routes from it are possible at that time. Note yet more the <a href="#urx">UR exit feature,</a> which allows you to click on the <i>signal</i>
at a lit <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit light</span> instead of that exit light to choose that
exit.</span></p>

<p><b>Shift-click-left on a signal</b><span> turns its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_fleet">fleeted</span>
status on or off. See <a href="#fleet">Auto-cancel and Fleeting</a> for more
info. <b>Control-click-left</b> on
the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span> of a <a href="#home">home signal</a>
offers a <a href="#callon">call-on</a> if appropriate
conditions are met.</span></p>

<p><span>Click <b>right on a signal,</b> more specifically its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light,</span>
to pop up a <a href="#fullsig">Full Signal Display</a> for
that signal.</span></p>

<h3>Clicks on <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">Track Sections</span></h3>

<p><span>Click <b>left</b> on a <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track section,</span> any portion
of it, to toggle its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">&quot;occupied&quot;</span> status, i.e., move a
train into it or out of it. Normal
train movement can be simulated by <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupying</span> several successive
sections (a normal train is ten cars of sixty-one feet), occupying sections
ahead and cleaning up behind. Of
course, you can lift trains off the track with the mouse by simply clearing <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied</span>
sections in a non-real manner. That
is, click left drops a train on the tracks at the point you click, or removes
it if there is one. This, of
course, is an NXSYS feature only, and not a feature of real interlockings. While this is the best way to learn the
effect of train movement on the interlocking, it is not &quot;realistic&quot;
or &quot;fun&quot;: for that you
need autonomous (auto, no mouse) simulated trains, which are provided by the <a href="#trains">train system.</a></span></p>

<p><span>To determine the circuit ID/section number of a track section, call
up its <a href="#controlright">context menu</a> (<b>control-right</b>),
select <b>Query Relay</b>, merely observe the number displayed, and dismiss the
relay query dialog.</span></p>

<h3>Clicks on Switches</h3>

<p><span>Clicking <b>right on a switch,</b> its points
or arms, will attempt to move that switch (change its position). The switch will flash red as it
moves. This is <i>not the correct
way</i> to move switches, though: the correct way is to select routes and
enjoy watching the interlocking identify and move the switches correctly: see <a href="#nxo">Basic NX Operation.</a> This capability is provided only for
debugging and playing around, i.e., deliberately annoying the interlocking for
the pleasure of later watching it move the switches at route-setup: you should never legitimately need to
move switches this way. This is an <b>NXSYS</b>
shortcut for the operation normally performed by manipulating the <a href="#auxkeys">auxiliary switch keys.</a></span></p>

<p><span>Note that switches that are in the reverse position
(&quot;thrown&quot; in sloppy, non-technical terminology), but not lit in red
or white are lit in blue dots -- this is a non-standard feature, again, to
facilitate learning. Note that the
switch <i>will not move</i> if the interlocking does not permit it -- this is a
major goal of interlockings. See <a href="#ifeat">interlocking features.</a></span></p>

<h3>Clicks on <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">Exit
Lights</span></span><span></h3>

<p><span>Clicking <b>left on an <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit light</span></b> selects that exit, and attempts to complete the route between the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiated</span>
entrance and that exit. Other lit
exits will be &quot;knocked down&quot;, switches moved, and the appropriate <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track
sections</span> made part of the route, all in the correct
sequence.</span></p>

<p><span>There is always a signal at an <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit light,</span> and one
may, if one chooses, use the <a href="#urx">UR exit feature</a>
and click on that signal instead of the exit light to select the exit. The relevant signal at an exit is
usually the one <i>opposing</i> the direction of traffic, unless, of course,
there is only one in the other direction. See <a href="#nxo">Basic NX Operation.</a></span></p>

<p><span>At times, you may see <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK lights</span> and switch points flash (the latter in white) in unison when you
attempt to <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiate</span> some other signal. This indicates a conflict in routes that
you must resolve. See <a href="#lockconflicts">Locking conflicts.</a></span><span></span></p>

<h3>Clicks on <a href="#auxkeys">Auxiliary
Switch Keys</a></span><span></h3>

<p><span>Click <b>left on an <a href="#auxkeys">auxiliary
switch key</a></b> calls for the switch to move normal or reverse,
depending upon which half is clicked. The call remains in effect as long as the mouse button is held.</span></p>

<p><span>Click <b>right on an <a href="#auxkeys">auxiliary
switch key</a></b> calls for the switch as does click left, but the call
remains in effect even after the mouse button is released; the call can be
cancelled by clicking on it again, the switch locking, or use of the menu item <b>Interlocking|Clear
all aux switch keys.</b></span></p>

<p><u>Auxiliary switch
keys</u><span>auxkeys
are not the standard way to operate switches. This capability is provided only for
debugging and playing around, i.e., deliberately annoying the interlocking for
the pleasure of later watching it move the switches at route-setup, as well as
esoteric needs discussed under <a href="#auxkeys">that rubric.</a>.
Use the <a href="#nxo">NX route selection mechanism</a> to
move switches in normal usage.</span></p>

<a name="controlright"/><h3>Context Menu (control-right click)</h3>

<p><span>Clicking <b>control-right</b> (that is, clicking <b>right</b> while
holding the <b>control</b> key down) on any <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track section</span>,
switch, signal, or <a href="#auxkeys">auxiliary switch key</a> offers (as per Windows convention) a
&quot;context menu&quot;, a list of possible operations upon the object on
which you clicked, including both &quot;interlocking&quot; operations
simulating various pushes, pulls, and turns of buttons on real panels, and
&quot;simulator&quot; operations, such as popping up <a href="#fullsig">full signal windows</a> or examining the <a href="#relays">circuitry</a> associated with that signal or other object. All of the operations available by other
clicks appear on the context menu, as well as some operations (such as the <a href="#callon">call-on</a> stop release key and <a href="#aplock">approach locking</a> release) not available
elsewhere.<br clear=all style='page-break-before:always'>
</span></p><a name='fullsig'/><h2>1.6 Full Signal Display (Aspect windows)</h2>

<p><span><img align='right' src='fsd.bmp'/>Click right on the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span> of any signal
and a window with a full drawing of what that signal actually looks like will
be popped up. These signal images reflect the signal state dynamically. The windows can be moved around at will,
and are child windows of the track board. They can be closed individually with their individual system menus, or
all flushed from the screen with the </span><b>Other|Flush
Sig Wins</b><span> menu item. The title
bar of a full signal display gives the most common nomenclature for the signal,
which is the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever</span> number for interlocked signals and the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_sno">station
number</span> for <a href="#automatic">automatic signals.</a></span></p>

<p><span>The full signal display window will pop up right under the signal
icon on the control panel; you
should then pick it up with the mouse, grabbing it by its title bar, and place
it where you want.</span></p>

<p><span>These signals are implemented according to the &quot;new&quot;
(BMT/IND) convention (new since 1935, all new NYCTA signals today). Red means stop, Green means that not
only may you proceed, but the next signal is clear,
as well, and yellow means proceed with caution: usually, but not always, the
next signal will be red.</span></p>

<p><span>When there is more than one head (vertical box of one to three
lights), the upper one means as above, and the lower one indicates green for
straight, yellow for diverging route . Sometimes there will be two-headed signals
where they do not seem necessary -- we cannot go into that here.</span></p>

<p><span>At the bottom of the Full Signal Display (except for <a href="#dwarf">dwarf signals</a>), a little to the right of
the signal, you will see a depiction of the signal's <a href="#stops">train stop.</a> (On
the BMT and IND, it is to the left of the track, on the IRT, it is to the
right). The yellow head of the stop
will be on the bottom of the window if the stop is down (passable), or up on
its black stem if the stop is up (tripping, impassable). The stop goes up and down, visibly, in
the time it takes a real stop to do so. Please see <a href="#stops">stops.</a><br
clear=all style='page-break-before:always'>
</span></p>

<a name='menu'/><h2>2.0 Menu Commands</h2>



<p><span>As the point of this system is to simulate another, already-defined
interface, most control is accomplished by that means, not Windows menus. Nevertheless, here are the known
commands. Most are disabled if no
interlocking is loaded.</span></p>
<table><tr><td><b>File</b></td><td width='150px'><b>Open</td><td> Reads
in the definition of an interlocking from an interlocking definition file,
usual suffix <b>.tko</b>, consting of <a href="#relays">relay</a>
code and layout directives compiled by the Relay Compiler. &quot;Interpreted&quot; interlocking
source files (<b>.trk</b>), needed for relay circuit vieing and development,
are also accepted, although error diagnosis is poor right now. If you are reading a <b>.tko</b> file,
make sure it is of the right bitness (i.e., compiled for 32 bits if you are
using <b>NXSYS32</b>) -- you will get an explicit diagnostic if it is not. See the <a href="#scenarios">Interlocking
Scenarios</a> for the correct names of files for each version and the
lowdown on creating your own scenarios.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Reload</td><td><span>   Asks
for confirmation, and re-initializes the currently-loaded interlocking from the
current interlocking definition file. This resets its state to &quot;as it was in the beginning&quot;. This can also be used to debug changes
to interlocking definitions or simply to reset the layout. See also </span><b><span>1 (Last interlocking pathname)</span></b><span> below on this menu to reattempt to load an interlocking that has failed to load.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Demo</td><td><span>      brings
up a file dialog for interlocking demo (<b>.xdo</b>) files, and runs the demo
you select. See the <a href="#demos">Demo System</a> section.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>NXScript</td><td><span>                 brings
up a file dialog for an <b>NXSYS</b> script written in <b>NXScript</b>. Please see <a href="#scripts">Scripting and OLE Automation</a>.</span>&nbsp;<span style='color:#900'>This feature is not available on the Macintosh.<span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Command Dialog</td><td><span> brings
up an &quot;Interactor&quot; dialog, into which you can type individual <b>NXScript</b>
commands and see their result, i.e., run <b>NXSYS</b> from the keyboard. The dialog is non-modal, that is, you
can interact with <b>NXSYS</b> either via it or the usual controls while it is
up; <b>Enter</b> activates each
command, <b>Esc</b> dismisses the dialog. Please see <a href="#scripts">Scripting and OLE Automation</a>
for the list of valid commands. <b>Alt+X</b> brings it up, too, and refocuses
it if is already up.</span>&nbsp;<span style='color:#900'>This feature is not available on the Macintosh.<span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Print Logic</td><td><span>            offers
a Printer Dialog and prints a set of electric schematic diagrams for all the <a href="#relays">relays</a> in the interlocking, sorted in
name order, along with comprehensive indexes in the traditional style at the
end of the set. The state of the
contacts will reflect the state of the relays at the time it is invoked. Works only if an interpreted (<b>.trk</b>)
interlocking is loaded. See </span><b>Print Logic File.</b><span></span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Print Logic File</td><td> <span> Same as </span><b>Print Logic,</b><span> but tries to work
when a compiled (<b>.tko</b>) interlocking is loaded by asking you to supply
the corresponding source (<b>.trk</b>), and prints the <a href="#relays">relays</a> in the order they are defined in that file, but with
their contact states as actually reflected in the state of the interlocking at
the time it is invoked.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Exit</td><td><span>     Closes
down the simulator. Passengers are
left stranded in the tunnels without power or Windows resources.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b><span>1 (Last interlocking pathname)</span></td><td><span> Tries to reload the last interlocking
definition successfully loaded. You
cannot use <b>Reload</b> if no interlocking is loaded; this is useful to reload
an interlocking being debugged which has failed to load.</span></p></td></tr>


<tr><td><b>Interlocking</b></td><td width='150px'><b></td><td>These commands perform
various auxiliary functions controlling the interlocking. They have no counterparts at real
interlockings (although there is an &quot;emergency switch release&quot;, but <b>NXSYS</b>
and its interlockings do not now implement it -- <b>Release all approach
locking</b> is the closest to it. They are to facilitate experimentation.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Clear all track</td><td><span>    is
not an interlocking function at all. Lifts all trains into the sky, clearing all <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied</span> <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track
sections.</span> Obviously, there is no real-life parallel. This is not the same as killing all <a href="#trains">trains.</a></span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Cancel all signals</td><td><span>            does
just that, cancelling all initiations and routes as well, making all <a href="#home">home,</a> <a href="#apsig">approach,</a>
and <a href="#dwarf">dwarf</a> signals red, dropping all
routes, and cancelling all <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_fleet">fleeting.</span>  Routes might still be shown lit,
though, due to <a href="#aplock">approach locking</a> and <a href="#routl">route locking.</a></span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Release all approach locking</td><td><span>   See the discussion of <a href="#aplock">approach locking</a> for the need for and
explanation of this. Please note
that it also releases all route locking. Typing <b>Control-A</b> at any time invokes this command.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Clear all aux switch keys</td><td><span>            Restores
all <a href="#auxkeys">auxiliary switch keys</a> to their
neutral position, i.e., not calling for any switch in any direction,
extinguishing yellow and green &quot;hold&quot; lights. <b>Normal all switches</b> will, of
course, not normal any switches held called reverse by auxiliary switch keys.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Normal all switches</td><td><span>       calls
all switches to move to the normal (main route) position, not by magic, but by
&quot;operating their <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">levers.&quot;</span> Thus, only switches which are neither
locked (see <a href="#slock">Switch locking</a>) nor
called reverse by <a href="#auxkeys">auxiliary keys</a> or
established routes will move. The
switches will all move in parallel and take the usual amount of time, and
indicate as such.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>All the above</td><td><span>      clears
all track, cancels all signals and routes, releases approach locking, and
normals all switches, in that order, which is guaranteed to work if there are
no bugs. If there are no bugs, this
is a faster and more &quot;correct&quot; way of resetting an interlocking to
its initial state than </span><b>File|Reload.</b><span> This command interposes a 1.5 second
delay before attempting to <b>Normal all switches</b> to assure that all <a href="#stops">train stops</a> have returned to their
tripping position, without which some switches to be called normal might be
locked.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Bobble all Signal repeaters</td><td><span> simulates
a 3-second failure of track electrical power to all &quot;red signal repeater
relays&quot;, causing false indication to appear at the interlocking, if the
latter is programmed for this feature (<a href="#progman">Progman
St.</a> currently is, <a href="#islington">Islington</a>
is not). This sometimes happens in
real life, and activating this menu item (which requires confirmation) tests if
the interlocking is properly designed to handle this contingency.</span></p></td></tr>


<tr><td><b>Trains</b></td><td width='150px'><b></td><td>These
commands create and manage <a href="#trains">trains.</a> See that section for a description of
that feature.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>New</td><td><span>   Asks
you to choose a track, with the mouse or by typing a digit, and creates a new
train, popping up its train dialog. The train will be in the &quot;Observant&quot; state, and will slow down
and stop outside the limits of the interlocking if you have not cleared a route
for it.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b><span>New (stopped)</span></td><td><span>   Same
as <b>New</b>, except the train will be created in the stopped state
(&quot;Free will&quot; mode, 0 fps). The train will not move until you advance its throttle or place it into
&quot;Observant mode&quot; and clear signals in front of it.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Halt all</td><td><span>   halts
all trains in their tracks, immediately, with infinite deceleration. You will have to move individual speed
controls on the train dialogs to restart them.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Kill all</td><td><span>     makes all trains and their dialogs disappear instantly.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Minimize all</td><td><span> minimizes all train dialogs, reducing them to
numbered icons at the desktop bottom. They can be restored individually (as any iconized window), or <i>en
masse</i> with <b>Show all.</b> You
can minimize any train dialog by clicking its minimize control; train motion
will not be affected.</span>&nbsp;<span style='color:#900'>This feature is not available on the Macintosh.<span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Show all</td><td><span> restores all minimized train dialogs to visibility.</span>&nbsp;<span style='color:#900'>This feature is not available on the Macintosh.<span></p></td></tr>


<tr><td><b>Cab View</b></td><td width='150px'><b></td><td>These
commands pertain to the <a href="#threed">3-D Cab View Window.</a>
Most of the commands for controlling that window appear on its own menu; these
commands deal with calling it up, removing it, and coordinating it.</span>&nbsp;<span style='color:#900'>This feature is not available on the Macintosh.<span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Show Cab View</td><td><span>                 Calls
up the cab view window, bringing it to the front and making it the input focus
(typed commands will be directed to it.) If the Cab View and 3-D graphics DLL's (dynamically linked libraries,
the software needed to use the Cab View Window) have not yet been loaded, they
will be loaded, or an appropriate diagnostic issued. If the window has already been created,
but is closed or hidden, it will be opened and displayed.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Unload Cab View</td><td><span>              Closes
the cab view window and unloads the cab view DLL's, allowing deleting or
replacing them. Although the cab
view can be called back with <b>Show Cab View,</b> this is not the best way to
merely hide or disable the cab view; to do that, double-click the system icon
on the Cab View Window, or choose <b>File|Hide</b> on its own menu.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Auto Engage Trains</td><td><span>         This
item (which can be checked on or off, it is on by default) controls whether <a href="#trains">trains</a> automatically &quot;engage&quot;
the cab view window, when they are the first and only active train created. If enabled, the cab view window will
automatically &quot;see&quot; out of the window of the first train created when
there are no other trains present (i.e., it will &quot;remain aboard&quot; that
train unless reengaged to another).</span></p></td></tr>


<tr><td><b>Relays</b></td><td width='150px'><b></td><td>These
commands facilitate debugging or observation of the <a href="#relays">relay logic</a> implementing each interlocking. They are intended for the &quot;signal
maintainer,&quot; not the towerman. </span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Query</td><td><a name='relayquery'/> puts up a dialog asking for the name of a
relay, such as 4707NS. The state of
that relay will be reported via a second dialog, which will also display a list
of all relays whose state depends upon the state of the relay selected. Double-clicking on any one of those
starts anew at that relay. This
works in interpreted as well as compiled interlockings, in which latter case it
is the only logic probing tool available. In an interpreted interlocking, drawing the circuit of the selected
relay is also offered. The last 40
relays requested are offered in a combo-box drop-down.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Trace</td><td><span> pops
up a tall, thin window in which all simulated relay transitions are
reported. In true Lisp fashion,
transitions of compiled relays are reported as effortlessly as those of
interpreted ones. If the window is
already up, this command hides it (making keyboard use (<b>Alt+R T</b>) very
convenient). See <a href="#tracewindow">Relay Trace Window</a>.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Show Circuit</td><td><a name='showcirc'/><span> 
prompts for the name of a relay, like </span><b>Query,</b><span> and the pops up a
window drawing the circuit of that relay in traditional Transit Authority
notation. &quot;Interpreted&quot; (<b>expr</b>)
interlocking code (<b>.trk</b>) must be loaded. If you click left on any relay contact,
the circuit for that relay will then be displayed. Unlike traditional drawings, however, <b>NXSYS</b>
drawings respond in real-time to relay state changes and update
accordingly! For fun, start by
displaying the circuit for 10PBS or 10XS at <a href="#progman">Progman
St.</a> and set up some <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_etoe">end-to-end</span> routes involving
signal 10 and then explore. 24PBS
is impressive, too. The last 40
relays requested are offered in a combo-box drop-down. See <a href="#relays">Relays.</a></span></p></td></tr>


<tr><td><b>Other</b></td><td width='150px'><b>Flush Sig Wins</td><td><span>  removes
all <a href="#fullsig">Full Signal Displays</a> from the
screen. See there, and the <a href="#mouse">Mouse usage info</a>.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Show Stops</td><td> <a name="showstops"/>offers
a dialog with three radio buttons controlling the conditions under which <a href="#stops">train stops</a> are displayed on the
panel. You may choose to display
stops only when they are in the &quot;stop&quot; position (the default,) at all
times, in which case they will be displayed yellow when &quot;clear&quot; and
red when at &quot;stop&quot;, or not at all, which is the case on a real NX/UR
panel.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>Scale
Display</td><td>
offers a dialog which accepts a number, default 1, which zooms or shrinks the
display scale by that factor from its default. By setting this to .8, .7 or .5 or so,
large layouts can be made to fit on screen. As the display becomes smaller, label
numbers are discarded and other numbers are condensed.</span>&nbsp;<span style='color:#900'>This feature is not needed on the Macintosh; use native magnification gestures.<span></p></td></tr>


<tr><td><b>Help</b></td><td width='150px'><b><span>Usage/Help</span></td><td><span>          You must know about this already if you are reading this. Gets you into this help text.</span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>News</td><td><span> Goes
immediately to the <a href="#snew">What's new</a> section
of this help.</span>&nbsp;<span style='color:#900'>Use <a href='ReleaseNotes.html'>Release notes</a> on the Macintosh.<span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b>About</td><td><span> Displays system authorship and copyright information.</span>&nbsp;<span style='color:#900'>On the <b>App Menu</b> on the Macintosh.<span></p></td></tr>


<tr><td><b></b></td><td width='150px'><b><span>(Scenario-specific help)</span></td><td><span>                Help
about the specific <a href="#scenarios">scenario</a>
(specific interlocking) you have loaded is made available on the <b>Help</b>
menu. The text can come from this
helpfile or the interlocking definition.</span></p></td></tr>


</table>


<a name='demos'/><h2>2.1 Demos and the Demo System</h2>

<p><b>NXSYS</b><span> is more than willing to demo its capabilities by running automated
scripts. These scripts consists of instructions to &quot;press&quot; (that is,
click on) the buttons of the interlocking panel, comment upon what it's doing,
and wait between commands. A sample
demo script, <b>demo1-32bit.xdo,</b> is provided, both as a model and as a
learning tool for <b>NXSYS.</b></span></p>

<p>Demos are called up from the <b>Demo</b> item of the <b>File</b><span> menu, which puts
up a File Dialog allowing you to select a demo file. Alternatively, you can
specify<br/>       <b>-demo</b>
<i>demo-script-pathname</i><br/>when you invoke <b>NXSYS</b>, to get that
file loaded and run automatically. The selected file is then &quot;run&quot; via timer interrupts: that means that as the demo is going on,
the interlocking and all of its commands, menus, and controls are usable, as
well as those of other Windows programs. You can actually interact and interfere with the demo as it is going on,
or play in another portion of the interlocking, without fear of creating an
unsafe situation. Relay
Interlockings are highly parallel real-time systems.</span></p>

<p><span>If you are using a Windows screen-saver, do not be surprised if it
is invoked or the screen is blacked out due to inactivity while watching the
demo.</span></p>

<p><span>You can pause or end the demo at any time while it is active: typing a <b>space</b> pauses the demo or
resumes it if it is paused, and typing the <b>ESCAPE</b> key ends an active
demo. One can, of course, simply
exit <b>NXSYS</b> from the <b>File</b> menu while the demo is active, and that
will end it, too.</span></p>

<p><span>The forms in the demo script are simple Lisp forms that name signals,
track sections, and <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit lights</span> by number, provide strings to
display, and time intervals in milliseconds to wait. Most forms take an optional comment
which is displayed in a window at the bottom of the app's window.</span></p>

<p><span>A form naming a <b>track</b> section, <b>signal</b>, or <b>switch</b>
is a request to click left on that object. If the first element of the form is <b>mouseright</b>,
mouse right will be used instead, and the remainder of the form is the
&quot;real form&quot;. <b>mouseleftshift</b>
or <b>fleet</b> works the same way for click left with shift, used for <a href="#fleet">fleeting signals.</a></span></p>

<p><span>You can create and schedule <a href="#trains">trains</a>
with the demo system, providing a constant flow of traffic for you to
route. You have to pick a unique
train number (currently 1 to 15) for each active train. The second number in the <b>create</b>
form is a track number. The known <b>train</b>
keywords are <b>create, halt, reverse, kill, freewill, observant, callon,
minimize, restore.</b> <b>callon</b>
presses the <a href="#callon">call-on button,</a> <b>minimize</b>
and <b>restore</b> minimize and restore the train dialog. </span></p>

<p><b><span>(train</span></b><span> <i>n</i> <b>create</b> <i>trackno</i> <i>{...options...}</i><b>)</b>
allows several parameters to be specified (optionally, perhaps multiply) for
trains at creation time: <b>hidedialog</b> causes the train dialog to be
hidden, <b>minimizedialog</b> causes it to be minimized, and <b>halted</b>
causes the train to be created halted, in &quot;free will&quot; mode (the
default is &quot;observant&quot;). Starting a demo destroys all <a href="#trains">trains</a>
extant at that time.</span></p>

<p><span>The form <b>(options</b> <i>...options...</i><b>)</b> controls
global behavior. Currently
recognized are <b>noxes</b>, which disables (for this demo) the big yellow
&quot;X&quot; which simulates the mouse, <b>maximize</b>, which maximizes <b>NXSYS</b>'
window immediately, and <b>nostops, showstops,</b> and <b>showstopsred</b>,
which automate the stop-policy control (see <a href='#showstops'/><u>Show Stops</u></a>). These
options are intended to provide for lifelike simulation. The demo legend window does not appear
until the first time a form comment or <b>say</b> is used, so if you do not use
any form comments, the demo legend will never appear.</span></p>

<p><span>There is also a newer scripting system, <b>NXScript</b>, which is
more oriented towards creating realistic scenarios and organized testing, and
has many more capabilities. Please see <a href="#scripts">Scripting
and OLE Automation</a>.</span></p>

<p><span>Here is some typical demo scripting with trains. See also the supplied demo <b>demo1-32bit.xdo</b>.</span></p>

<p><b><span>(train 1 create 3 minimizedialog)   ;create train 1 on track 3,
minimized dlg<br/>(signal 24 &quot;Let's initiate a route at signal
24!&quot;)<br/>(wait 1000)<br/>(exitlight 8 &quot;Now when we choose the
exit light at signal 8...&quot;)<br/>(say 1200 &quot;Switches 21 and 15
move,&quot;)<br/>(wait 2000) <br/>(train 1 speed 50.5)      ;set speed
- sim feet/seconds<br/>(wait 180000)              ;wait 3 minutes for next train<br/>(train 2 create 1)<br/>(fleet
signal 26 &quot;Now let's initiate at 26, fleeted&quot;)<br/>(train 2
minimize) ; can minmize it
afterwards, too...</span></b><span></span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='trains'/><h2>2.2 Trains and the Train System</h2>

<p><b>NXSYS</b><span> is not unlike flight simulators in that it implements the
simulation of a real-world transportation system. With flight simulators and car
simulators the goal of the &quot;game&quot; is to master the driving of complex
vehicles through passive media: the
air and roads do little more than sit there. In <b>NXSYS,</b> however, you control
and learn a complex reactive environment through which vehicles may run; it
does not simulate, but actually <i>is</i> an NX interlocking. The goal is not to learn the piloting of
trains, but the controlling of <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_xlkg">interlockings</span> which themselves
restrict the movement of trains.</span></p>

<p><span>With that in mind, the most instructive mode of usage of <b>NXSYS</b>
is to control switches and signals and <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupy</span> and vacate <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track
sections</span> one-by-one, using mouse-left on <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track sections,</span>
carefully observing what happens when each becomes <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied</span> and
becomes vacant. This is the
equivalent of dropping and removing axles from the tracks to see the effect on
the interlocking.</span></p>

<p><span>While instructive, this is not as much fun as having real trains
obey the signals and move through the interlocking. While <b>NXSYS</b> cannot create real
trains in a simulated world, it can, however, simulate them. But like many a real towerman, the only
evidence of the &quot;trains&quot; that you will see on the panel is a line of
red (<a class='def' dref='#DEF_occ'>occupied</a>) lights. The fun is tripled when <a href="#threed">Cab View
Graphics</a> are available, granting you not just the hands but the eyes
of towerman and motorman at once.</span></p>

<p>You create a train by choosing the <b>Trains|New</b><span> or </span><b><span>Trains|New (stopped)</span></b><span> menu item; choose
between them as according to whether you want the train to start out moving
(automatically) or stopped. You
will be asked to choose a track either with the mouse or by typing the track
number (1 is Southbound Local, 2 Northbound Local, etc, as numbered on the
model). A <b>Train Dialog</b> will
pop up at that time, one for each train. The train will enter at the South end of a Northbound track and
vice-versa. The train dialog will
show, dynamically, the position of the front of the train, its speed, and the
next and last signals seen. The
train dialog may be minimized, or the train &quot;killed&quot; (made to
disappear) or halted at any time by pressing buttons on the dialog. There is also a scroll bar which is the
speed control. When a train
vanishes off the other end of the interlocking, its train dialog will
disappear.</span></p>

<p><span>There are two modes of train behavior, <b>Observant</b> (the
default) and <b>Free Will.</b> An
&quot;observant&quot; train acts as though under the control of a competent
&quot;motorman&quot; who is indeed watching the signals. It will slow down and speed up as
signals change, and slow to a halt at red signals. It will start up automatically when
stopped before a signal which you clear. If you create a train (all of which start out observant) without having
set up any routes for it, it will grind to a halt off the limits of the
interlocking, waiting for you to clear a route for it.</span></p>

<p><b>Free Will</b><span> (which may be chosen with the radio buttons in the train dialog)
trains do not obey the signals -- they obey you; they think they have free will, but
little do they know that their thoughts are coming from a higher power. You can use the &quot;Speed&quot; slider
scroll bar and &quot;Halt&quot; buttons to control their speed.</span></p>

<p><span>Even if you are a <b>Free Will</b> motorman, you may not defy the
interlocking. If you try to run a
red signal, you will be <a href="#stops">tripped</a>
(forcibly stopped_ by the <a href="#stops">train stop</a>
of that signal, forced to a halt, chastized, and your train
&quot;killed.&quot; This will also
happen if you, as towerman, cancel a signal in the face of an oncoming train
without giving it enough time to slow down. Thus, it is theoretically impossible to
orchestrate an unsafe train movement: that is the whole <i>point</i> of <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_xlkg">interlocking.</span> Note that <a href="#dwarf">dwarf
signals</a> are intrinsically unsafe, as it is possible to pass them in
unsafe circumstances, as they lack stops, but the Train System does not help
you with reverse-direction train moves (<b>note also that the train system does
NOT (currently) detect and trip on raised off-side stops --- see <a href="#stops">&quot;Stops&quot;.</a></b>).</span></p>

<p><b>Free Will</b><span> trains may, however, pass <a href="#automatic">automatic
signals</a> and <a href="#apsig">approach signals</a>
at crawl-speed, even if the stops are up via a maneuver known as <a href="#ak">automatic key-by.</a> See <a href="#stops">Train Stops.</a></span></p>

<p><b>Free Will</b><span> trains can even pass <a href="#home">home signals</a>
at stop if the towerman offers a <a href="#callon">call-on.</a> In this case, the yellow light at the
bottom of a <a href="#home">home signal</a> facing a train
of the train system will be lit (R R Y will appear in the train dialog), and a
&quot;call on&quot; button will appear automagically in the train dialog; The train should crawl up to that signal
in <b>Free Will</b> mode: the button will not be obeyed unless the train is
within 10 sim-feet of the signal! Pressing that button will lower the <a href="#stops">train
stop</a> and cause the button to disappear, at which point the <b>Free
Will</b> motorman can creep up on the back of another train, with the
towerman's cooperation. Please see
the <a href="#callon">call-on</a> section for more
information on this.</span></p>

<p><span>You may switch between <b>Observant</b> and <b>Free Will</b>
behavior at any time by operating the radio buttons on the train dialog. The initial state of a newly-created
train is chosen as <b>Observerant</b> or <b>Free Will</b> by virtue of its
having been created with <b>Trains|New</b>
or <b>Trains|New (stopped)</b> respectively.</span></p>

<p><span>There are three buttons always present on the train dialog, <b>Halt,
Kill,</b> and <b>Rev</b>(erse). <b>Halt</b>
stops the train immediately, and throws it into <b>Free Will</b> mode -- you
must then click <b>Observant</b> to restart it, if you wish it to run
automatically. <b>Kill</b>
immediately destroys the train and lifts it off the tracks. <b>Rev</b> is only enabled when the
train is stopped, either having ground to its own stop or having been <b>Halt</b>ed. When pressed, the motorman moves to the
other end of the train, and if the train is &quot;observant&quot;, it will obey
signals facing its other end and move in the other direction -- it &quot;turns
the train around&quot;.</span></p>

<p><span>There are main menu commands to minimize and restore all train
dialogs, halt all trains, and kill (make disappear) all trains.</span></p>

<p><span>With the train system, it is easy to set up one-time routes, watch a
train move over them, bring in the next train, hold trains at signals, turn
trains around at terminals, and so on, all in parallel, just like at a real
tower.</span></p>

<p><span>If you have the requisite software for the <a href="#threed">Cab View window</a> present, the checkbox <b>Engage Cab View</b>
appearing at the bottom of the train dialog can be used to see the view out the
front window of any train. Simply
click that checkbox &quot;on&quot; for any train which is active, and the cab
view window will view out that train's front window, moving with it over the
interlocking. NXSYS Development
apologizes for the lack of smoothness of the animation: this is being worked
on. Checking that box off will
disengage the cab view, as will engaging it on any other train. If the main menu item <b>Cab View|Auto
Engage Trains</b> is on, the first train created when no trains are active will
automatically engage the cab view. Please see <a href="#threed">Cab View Window</a>
for more information.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='threed'/><h2>2.3 Three-Dimensional &quot;Cab View&quot;
Graphics</h2><h3 style='color:#D00'>Cab View is not available in Version 2 NXSYS, including NXSYS / Mac</h3>

<p><span>If the proper software is present and locatable, NXSYS presents a <b>Cab
View Window</b>, which displays a realistic, three-dimensional view of whatever
interlocking you have loaded. The
view can be positioned to either direction on any point on any track, and
appears to be from the motorman's window (right of track center, about half way
up the tunnel height). All the tracks, switches, signals and <a href="#stops">stops</a> are displayed in accurate color
with accurate markings, and more importantly, display whatever aspect or
position is required of them by the state of the interlocking, and change in
real time. Here is an image of it.</span></p>

<p><span><img align='center' src='nxgl2.bmp'/></span></p>

<p><span>If the Cab View Window is present (see below), you can observe it at
any time, and change its viewpoint at will, as you operate the interlocking you
have loaded. It is extremely
convenient to watch several signals in spatial proximity as you manipulate
signals; the effect is quite realistic. Commands for operating the Cab View Window are available as menu items,
toolbar buttons, and keystrokes, although, as with any other Windows(tm)
application, that window must be &quot;foreground&quot; (blue title bar) to
receive keyboard input. The Cab
View Window has its own help text documenting its commands, which can be
accessed by typing F1 to it, or clicking the help toolbar button or calling it
up from that window's command menu.</span></p>

<p><span>Being in the Cab Window creates the feeling of being on a train:
with sufficient CPU resources, you can hold down the &quot;uparrow&quot; key
and move forward smoothly over tracks, creating an animation. If you do this, you will actually turn
over switches, rotating your view and switching tracks and rotating back. You can back up. You can turn around. The animation
effect approaches &quot;flight simulator&quot; quality in this mode.</span></p>

<p><span>When you navigate the interlocking with the Cab View Window, you are
not a train, but a &quot;virtual presence&quot; -- the interlocking (i.e., the
track circuits) does not know &quot;you are there.&quot; This feature may be added in the
future. Perhaps what you are
expecting is this next feature:</span></p>

<p><span>Cab View and <a href="#trains">&quot;Trains&quot;</a></span></p>

<p><span>Cab View may be used in conjunction with the <a href="#trains">&quot;train system.&quot;</a> If the menu item <b>Cab View|Auto Engage
Trains</b> is checked, whenever a train is created and there are no other
trains &quot;alive&quot;, the &quot;virtual motorman&quot; whose eye is the Cab
View window will board that train, and move with that train, seeing exactly
what a motorman on that train would see <b>except that other trains themselves
are not (yet) modelled/visible.</b> The motorman can be &quot;let off the train&quot; at any time by
clicking the X out of the checkbox <b>Engage Cab View</b> on that train's
control dialog, and put back on that train, or any other train, by checking
that box on the control dialog of whatever train you want to engage or
disengage (i.e., want the &quot;3-D graphics motorman&quot; to board or
disembark from). You can engage any
train that is alive at any time, the currently engaged train if any will
disengage automatically.</span></p>

<p><span>The quality and smoothness of the animation have a long way to go;
the simultaneous computational resources required skew both train kinematics
and the smooth interlocking navigation animation available from the Cab View
window. Please expect improvement
here; watch this space. If it is
too disconcerting, simply click off <b>Auto Engage Trains.</b></span></p>

<p><span><h3>When does the Cab View Window come up?</h3></span></p>

<p><span>The Cab View window can be called up at any time by use of the main
menu item <b>Cab View|Show Cab View.</b> If you do not have the requisite DLL's (&quot;.DLL&quot; dynamically
linked library files) available, the situation will be diagnosed at that time
and recommendations made. If you
not have this software, this diagnosis and complaint will not be issued at any
other time; <b>NXSYS</b> will continue to function without the Cab View Window
without complaint.</span></p>

<p><span>If the proper software is available, the Cab View Window will come
up, if it is not already up, any time an interlocking is first loaded or
reloaded. Also, if the <b>Auto
Engage Trains</b> feature described above is enabled, it will come up whenever
a &quot;first train&quot; is created (see above). If you click on the <b>Engage Cab View</b>
checkbox on any train's control dialog, the Cab View will come up if not
already up.</span></p>

<p><span>Any of these actions which call up the cab view window also bring it
to the foreground and make it the input focus.  Since <b>NXSYS</b> is almost
entirely mouse-operated, this should not present a problem. Except for <b>Cab View|Show Cab View</b>,
none of these actions will fail or even diagnose an error if the proper software
is not locatable.</span></p>

<p><span><h3>System Hardware and Software Issues</h3></span></p>

<p><span>The Cab View Window is implemented using Microsoft's &quot;Open
GL&quot; 3-D Graphics Library (for Windows NT/2000(tm) and Windows 95/98(tm))
implementing the standard designed and promulgated by Silicon Graphics, Inc.</span></p>

<p><span>Performance with an 8-bit video card is tolerable, but not as good
as with a 16- or 24-bit card. The
8-bit (256 color) cards require quite a bit of extra computation and
manipulation.</span></p>

<p><span>In any case, the calculations to compute the cab view scene are
substantial, and although every attempt is being made to optimize them,
currently, performance, as measured by how many views can be computed per unit
time, may be unacceptable on slower machines. Cab View is barely usable, and not at
all for animation, on machines lacking hardware floating point.</span></p>

<p><span>The Cab View Software is distributed as a DLL because it is optional
(<b>NXSYS</b> will work correctly without it), subject to its own development,
and for the reason that the absence of the Open GL system it requires would
prevent execution of <b>NXSYS</b> were it not a DLL. This DLL, <b>NXGLVIEW.DLL</b>, which is
in the standard distribution zipfile for <b>NXSYS,</b> must be present and
locatable (preferably in <b>NXSYS'</b> own directory) for the Cab View feature
to function.</span></p>

<p><span>The required Open GL software is a built-in part of Windows NT and
Windows 2000. The Windows 95(tm)
DLL's for Open GL, which differ from Windows NT/2000's, are not distributed
with Windows 95 (tm) (but will be soon), are available for free from several
sources, one of which is Microsoft (<b>http://www.microsoft.com</b>), and
another of which is the <b><u>NXSYS</u></b><a href="#webaddr"> web site.</a>. You may already have them. These DLL's,
as well as the Cab View DLL, must be in <b>NXSYS'</b> directory, the Windows
System directory, or any place else in the search path where <b>NXSYS</b> can
find them when it tries to call up the Cab View Window. Open GL is not available for Win32s
(Windows 3.1/3.11 32-bit extensions).</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='scripts'/><h2>2.4 Scripting and OLE Automation<br/></h2><h3 style='color:#D00'>OLE Automation and NXSCRIPT scripting are not available in NXSYS / Mac</h3>

<p><b>OLE Automation</b><span> provides for the control of <b>NXSYS</b>
interlockings by &quot;scripting&quot;, which means the creation and running of
&quot;scripts&quot;, such as those facilitated by the <a href="#demos">Demo system</a>, but in <b>NXScript</b>, a more user-friendly
language than the Demo system's Lisp. For example:</span></p>

<p><span>     switch 3 n<br/> wait 1000<br/> initiate 26<br/>     exit    16</span><span></span></p>

<p><b>NXSYS</b><span> now includes a command, <b><u>File|Command
Dialog</u></b>, which pops up a dialog that allows you to enter such
commands one at a time and observe their effect, i.e., run <b>NXSYS</b> from
the keyboard. Also provided is a
command-line application, <b>nxctl</b>, into which such commands can be typed
one at a time, or read from a file, to operate <b>NXSYS</b> from the keyboard
by typed (or stored) commands from another process.</span></p>

<p><span>OLE Automation allows other programs, notably in &quot;scripting
languages&quot; such as Microsoft Visual Basic(tm), Java/Javascript, and Perl,
to control <b>NXSYS</b> interlockings by looking at the model board and
pressing buttons, just as would a real tower operator, or, for that matter, a
&quot;remote (CTC) tower&quot; doing the exact same thing electrically. These programs (&quot;Automation
Controllers&quot;) can be written and run without changing <b>NXSYS</b> and
without access to the <b>NXSYS</b> sources. Automation controllers can also create,
destroy, and control <b>NXSYS</b>' simulated trains. What is more, the source for the
aforementioned program, <b>nxctl</b>, is provided as an example of an <b>NXSYS</b>
Automation Controller written in C++.</span></p>

<p><span>Those who are designing or debugging interlockings, or attempting to
learn the design logic of the supplied ones, can issue script commands such as</span></p>

<p><span>                 <b>verify
!20AS !4336NS</b>   ;Make
sure S/B locking dropped</span></p>

<p><span>to verify that the state of the system is as designed at given points in scripts.</span></p>

<p><span>In order to use <b>nxctl</b>, or control <b>NXSYS</b> from another
automation controller, you must tell Windows(tm) how to find <b>NXSYS</b> by
&quot;registering&quot; it as an OLE Automation Server. To do this, first make
sure that <b>nxsys32.exe</b> is in its &quot;permanent place&quot;, the place
where it can later be found, and then issue the command</span></p>

<p><span>  <b>nxsys32
/register</b></span></p>

<p><span>This command should issue a message confirming the OLE
&quot;registration&quot; of <b>NXSYS</b> into the Registry on that
machine. This only has to be done
once. To unregister (there is no
real reason why you should want to do this), merely <b>nxsys32 /unregister.</b> While you do not have to do this unless
you intend to use <b>nxctl.exe</b> or control <b>NXSYS</b> from another
program, it cannot hurt to do it in any case.</span></p>

<p><span>The program <b>nxctl.exe</b> provides a simple command line
interface to <b>NXSYS</b>. You can
issue scripting commands from it, either one at a time on the <b>nxctl</b>
command line, in an interactive &quot;shell-like&quot; loop, or run a whole
script from a file. The script
commands can open or close <b>NXSYS</b> (<b>nxctl</b> starts one up
automatically if there is not one running), load up an interlocking, initiate
or cancel a signal, punch in an exit, occupy or vacate a track section, move a
switch via its auxiliary key, or even set up a route between a signal and an
exit in one command. <b>nxctl</b>
issues interlocking-relevant diagnostics usually generated by <b>NXSYS</b>.</span></p>

<p><span>Here are some sample <b>NXScript</b> commands.</span></p>

<p><span>         load ..\prgman32.tko     ;load an
interlocking<br/>         i 20                     ;initiate signal 20<br/>         c 20                     ;cancel signal 20<br/>         r 20 34                  ;line route from 20 to 34<br/>         a 20                     ;show aspect of signal 20<br/>         w 7 r                    ;key switch 7 reverse<br/>         w 7 n hold               ;switch 7 normal, hold called<br/>         c all                    ;cancel all signals<br/>         quit                     ;close
</span><b>NXSYS</b><span><br/>   etc.</span><span></span></p>

<p><span>All commands have long names and some have short names, too (see the
table below). A good way to experiment with <b>NXSYS</b> scripting is to make a
small Command Prompt window near the bottom of the screen, run <b>nxctl shell</b>,
and type <b>NXScript</b> commands at it one at a time and observe their
effects.</span></p>

<p><span>A small <b>NXScript</b> file for <a href="#progman">Progman
St.</a>, <b>test1.nxs</b>, is included. Change the pathname inside it for <b>prgman32.tko</b>
inside of it to whatever is right at your site.</span></p>

<p><span>The current scripting language repertoire is as follows. This printout is available by invoking <b>nxctl</b>
with no arguments. Here, <b>{arg}</b>
means an optional argument. Most of
these commands are the same as <b>NXSYS</b> menu items or the standard
interactive interlocking controls documented in this helpfile.</span></p>

<p><span> (Blank lines and text
after ; is ignored (except as part of <b>say</b> text))<br/></span><span> FILE path             Run commands from &quot;path&quot;<br/> QUIT                  Close the </span><b>NXSYS</b>

<span> app<br/> RESETALL              Reset all signals and vacate track (leave switches)<br/> LOAD path             Load up an interlocking (or L)<br/> INITIATE nnn          Initiate at signal nnn (or I)<br/> CANCEL nnn            Cancel signal nnn (or C)<br/> CANCEL ALL            Cancel all signals<br/> FLEET nnn             Fleet and try to initiate signal nnn<br/> UNFLEET nnn           Cancel fleeting on signal nnn<br/> ASPECT nnn            Show aspect of signal nnn (or A)<br/> RESETAPPROACH nnn     (or
RESETAS)Reset signal nnn's approach locking<br/> RESETAPPROACH         Reset all timing-out approach and route locking<br/> FSD nnn {hide}        Show (hide) full signal disp nnn window<br/> EXIT xxx              Press exit button xxx (or X)<br/> OCCUPY ttt            Occupy track section ttt (or O)<br/> VACATE ttt            Vacate track section ttt (or V)<br/> SWITCH nn P {hold}    P is R or N, hold
locks key (SWITCH or W)<br/> SWITCH NALL           Normal all switches -- see RESETALL<br/> ROUTE nnn xxx         Line a route from sig nnn to xxx (or R)<br/> RELAY nnNNN           Show the state of given relay or logic point.<br/> VERIFY rly rly !rly... Verify true/false
logic terms<br/> WAIT ms               Wait ms milliseconds (useful in files)<br/> WINDOW cmd            maximize, minimize, restore app window<br/> SHOWSTOPS cmd         always, never, tripping<br/> SAY stuff stuff stuff Print
text as </span><b>NXSYS</b><span>
demo legend (not on cmd line)<br/> TRAIN starttrk SPEED=n.n PANEL=MIN/REST/HIDEID=n<br/>                        CONTROLMODE=AUTO|MANUAL (dft auto anon)<br/> TRAIN-related cmds: HALT
n, KILL n, SPEED n ff.ff, PANEL MIN/REST/HIDE,<br/> AUTOPILOT n {off}, ACCEPTCO n, REVERSE
n. (KILL ALL, too).</span><span></span></p>
</pre>
<p><span>Also included is a Visual Basic (4.00) form script that illustrates
how simple it is to operate OLE Automation from a scripting language. If you have Microsoft Visual Basic, load
up this script and run it, and better yet, modify it.</span></p>

<p><b>NXSYS</b><span> also includes a command on the <b>File</b> menu, <b>NXScript</b>,
that reads and executes an <b>NXScript</b> file directly by calling its own OLE
Automation interface. You can also
run an <b>NXScript</b> script from the Windows command line (or an icon) as
follows:</span></p>

<p><span>                 <b>nxsys32
-script</b> <i>script-pathname</i></span></p>

<p><span>The current <b>NXScript</b>/automation system does not provide for
drawing the &quot;big yellow X's&quot; that the <a href="#demos">Demo
System</a> uses to illustrate mouse clicks, otherwise, it does everything
and more than the latter. Be sure
to use the latest version of <b>prgman32.tko</b>, fixing a small bug (some exit
lights were defined twice!) which inhibited proper automation. As with the <a href="#demos">Demo System,</a> <b>space</b> pauses and resumes scripts, and <b>ESC</b>
aborts them.</span></p>

<p><span>The components needed to write scripting extensions in other
languages (than merely writing <b>NXScript</b> scripts) are not provided in the
main <b>NXSYS</b> zipfile, but in the zipfile <b>nxole.zip</b> in the same
directory. This includes the source
for <b>nxctl</b>, the header file defining the C++ classes, the Microsoft
Visual C++ object file <b>nxautcli.obj</b> that supports those classes, and the
definitions of the <b>NXSYS</b> OLE Automation interfaces accessible to all
automation controllers (<b>oleapi.txt</b>).</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='ifeat'/><h2>3.0 Signalling and Interlocking Features</h2>

<p><span>This section describes standard signalling and interlocking
concepts, both in general and as they are implemented in <b>NXSYS</b> and its
sample interlockings. These are not
only the fundamentals of signal function, but the various features that
facilitate switch and signal operation and constrain it to be safe.</span></p>

<p><span>If, when <a href="#mouse">Using the Mouse to Control
the Interlocking,</a> you find that signals will not clear and switches will not move on your demand, that
is why. That is the whole purpose
and meaning of <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_xlkg">interlocking,</span> to enforce operation in the proper
order.</span></p>

<p><span>With an NX interlocking, you do not move switches or attempt to
clear signals directly, but instead, let the &quot;system&quot; do it as a
consequence of route selection (see <a href="#nxo">Basic NX
Operation.</a>) Nevertheless,
the &quot;system&quot; goes through the same moves as would a
&quot;manual&quot; towerman in an old-style interlocking, and is subject to the
exact same constraints and cross-locks as in that case. These are described in the subsequent
sections of this chapter.</span></p>

<p><span>The following sections are presented in the order in which they must
be understood. The section <a href="#clength">Control Length -- the Purpose of Signals</a>
underlies and determines the entire philosophy and implementation of the signal
system, is thus first. Please
proceed, prepared to stop at the <a href="#clength">next section.</a></span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='clength'/><h2>3.1 Control Length -- the Purpose of Signals</h2>

<p><span>The charter of rapid transit is evident in its name: to move people
safely as rapidly as possible. While trains, motors, and propulsion power are responsible for the
rapidity, signals are responsible for the safety.</span></p>

<p><span>A rapid transit signal's job is to keep trains at a safe distance
from dangers, including each other, via three closely-related functions,</span></p>

<p><span>*  To
indicate to train operators whether the track ahead is clear,</span></p>

<p><span>*  To
instruct the train operator to proceed (green), proceed prepared to stop at the
next signal (yellow), or to stop (red), accordingly, and </span></p>

<p><span>*  To
forcibly stop a train via its <a href="#stops">train stop</a>
should that train fail to comply with an indication of &quot;stop.&quot;</span></p>

<p><span>An extent of track being
&quot;clear&quot; means that it is proven free of hazards such as other trains,
<span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_trps">trailing-point switches</span> set the wrong way, open drawbridges,
conflicting routes from other signals, and so on. The extent of track ahead of a given
signal for which it makes this check, which is different for different signals,
is called its <b>control length,</b> as it controls the signal's indication.
If, at a given time, any of these hazards appear within any portion of a
signal's control length, that signal is required and designed to display an
indication of &quot;stop&quot;. A
&quot;clear&quot; indication confirms the proven absence of hazards within a signal's control length.</span></p>

<p><span>Signals are placed regularly along a
track, at <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_IJ">insulated joints,</span> subject to considerations to be
discussed. Each signal's indication
instructs the train operator what to do <i>up to the next signal.</i> An indication of &quot;proceed&quot;, or
&quot;proceed prepared to stop at next signal&quot; is only valid up until the
next signal, when that signal's indication assumes validity.</span></p>

<p><span>Consider the following &quot;single
line&quot; signalling diagram. As per standard, the lines under the track
starting in little circles at signals and ending in arrows represent those
signals' control lengths. The
&quot;lazy house&quot; shaped object represents a stopped train. The big arrow indicates the direction of
traffic. The signals here are 200'
apart.</span></p>

<p><span><img align='center' src='clbogus.bmp'/></span></p>

<p><span>Here, each signal is controlled
solely by the occupancy of the &quot;block&quot; in front of it, extending to
the next signal (that is, whether it is clear or not. 245 is yellow because 247 is red). Assuming that 245 is visible early
enough for the operator of an approaching train to observe and obey it and slow
down, and posted speed restrictions are being obeyed, that train will stop
before arriving at the red signal 247, and the rear of the stopped train, and
this scenario is adequate.</span></p>

<p><span>But in real life, this will not do:
an oncoming train might not be operating within the posted speed limit, and the
train operator might be temporarily or permanently physically, mentally, or
morally incapacitated, in which case the signal system, via its <a href="#stops">train stops,</a> must forcibly stop the
train. In these cases, the yellow
aspect (indicating &quot;prepare to stop at next signal&quot;) might be
ignored, and a train going at the fastest possible speed will arrive at signal
247 at speed.</span></p>

<p><span>Assuming signal 247 had a train stop
that acted as expected (assumed &quot;tripping&quot; position when the end of a
train passed it, although this not quite the case in reality, see <a href="#stops">train stops</a>), and the oncoming train's
brakes were fully applied automatically by it, a collision would still result,
because trains moving at 60 or 70 miles per hour cannot &quot;stop on a
dime:&quot; typically, hundreds of feet are required for a train moving at full
speed to come to a halt via a brake application.  On this account, a train must be
commanded to stop hundreds of feet <i>before</i> an obstruction <i>at</i> which
it <i>must</i> stop. This distance is called the <b>worst-case (or
&quot;safe&quot;) braking distance,</b> and is a function of the maximum speed
of trains, the terrain, the weather conditions, and so on. It is called
&quot;worst-case&quot; because it must take into account brakes in the worst
condition (short of total failure), trains going at the maximum achievable,
impermissible, speed, tracks at maximum slipperiness, and so on.</span></p>

<p><span>It can be seen that simply increasing
the block length to the worst-case braking distance, or many times it, does not
improve the situation -- a train approaching another train at the near end of a
block at speed will not have enough space to stop, even if &quot;tripped&quot;,
no matter how long the block. In
track-circuit based signalling, train position can be reckoned only in terms of
which track circuits the train occupies. The solution to this problem is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_ovlp">overlap</span> of control
lengths, that is, having each track circuit (section) control not one but
several signals behind it -- were there only one red signal behind a train, the
situation is always possible in which it is too close behind the train for safe
braking. Consider the following far more realistic scenario:</span></p>

<p><span><img align='center' src='clen.bmp'/></span></p>

<p><span>Here, the control lengths of all
signals are <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_ovlp">overlapped.</span> 243, 245, and 247 indicate &quot;stop&quot;, and 241 indicates
&quot;prepare to stop at next signal&quot; (yellow aspect). The worst-case braking distance here is
somewhere between 200 and 400 feet. An oncoming train barreling
ahead at full speed ignoring signal 241 will be tripped by 243, and come to a
halt within the safe braking distance indicated, that is, short of block 247
and the train it contains. From
this it can be seen that the key to safety is a control length <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_ovlp">overlap</span>
at least equal to the worst-case braking distance.</span></p>

<p><span>The key to understanding this is to
think (in this case) about signal 241, not 243. By giving a &quot;clear&quot; (albeit
&quot;prepare to stop at next&quot;) indication, signal 241 has asserted that
should a train accept its indication, the track which is encompassed in its
control length is safe, in particular, such that <b>if the <i>next</i> signal
(i.e., 243) within that control length indicates &quot;stop&quot;, and that
indication is obeyed or enforced via a <a href="#stops">train
stop,</a> that train will stop within that control length (i.e., before <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_IJ">IJ</span>
247) and clear of any danger.</b> In other words, the 241 asserts by its clear indication that its control
length is safe, even if you are forcibly stopped within it.</span></p>

<p><span>From the above it can be seen that a
signal must have a control length of at least one safe braking distance beyond <i>the
next signal,</i> i.e., its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_ovlp">overlap.</span> Because of this design, and the use of
train stops, the signal system ensures that trains are kept a safe distance
from each other and from other, transient, dangers. (Note that this has very
definite implications for interlockings: an interlocking cannot allow a
dangerous condition to be thrown in the path of a train which has already
accepted a signal which has spoken for the absence of such conditions in its
control length. See <a href="#aplock">approach locking.</a>).</span></p>

<p><span>In the above scenario, it is assumed
that the operator of an oncoming train will see the yellow aspect of 241 and
begin to brake sufficiently soon to be able to stop the train before reaching
243, lest it train be tripped. Given that the distance from 241 to 243 is markedly less than the
worst-case braking distance, we can assume that the distance from the place
where 241 can first be seen to 243 must be the expectable braking distance at
the posted operating speed. A train
obeying 241 under these conditions will not be tripped at 243. If 241 is not clearly visible far back
enough, either inter-signal spacing should be longer, or more than one signal
back should display yellow (&quot;prepare to stop at next signal&quot;) if 243
is red (a feature known as <b>overlapped distant control.</b>) Another common technique used at
interlockings and places where closely-spaced signals are needed is the
employment of signals that have only yellow and red aspects, i.e., always, when
clear, indicate &quot;prepare to stop at next signal.&quot;</span></p>

<p><span>Note that if one can &quot;prove&quot;
that a train is going at reduced speed, required braking distance will be less,
and the enforced separation between trains, and hence signal control lengths,
would be less. This is the idea underlying
<a href="#stationtime">station time signals,</a> described
in the referenced section.</span></p>

<p><span>In much &quot;routine&quot; <a href="#automatic">automatic signal</a> territory,
inter-signal spacings are equal to or greater than one safe braking distance,
and control lengths two track circuits (two safe braking distances). Closer signals allow for finer control,
especially when combined with the <a href="#stationtime">station time</a>
feature.</span></p>

<p><span>The situation is slightly different
for <a href="#dwarf">Dwarf Signals</a> and home signal <a href="#callon">call-on.</a> The control lengths of such
signals and moves do <i>not</i> check for trains, but do check for switches,
conflicting routes, etc. (See <a href="#sigtype">Types of
Signals.</a>). In these cases, what trainmen (like pilots) call
&quot;visual rules&quot; apply: trains must operate at very low speed, prepared to stop within vision.</span></p>

<p><span>Since a signal being clear indicates
that there are no hazards in its control length, it must also be so that no two
signals not in the same direction on the same track may clear movement into the
same track section. This is one of
the fundamental principles of interlocking, and is enforced by disallowing the
calling of a signal (via its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever,</span> in NX/UR interlockings an
abstraction implemented in relays rather than a physical lever) when the levers
of other signals are now so set that clearing this signal would create such a
situation. Even below the level of
the levers, the relay circuitry of the signals prohibits opposing and
conflicting signals from being clear simultaneously.</span></p>

<p><span>The selection of the spacing and
control lengths of signals is an exceedingly complicated subject, and involves
not only considerations of safety, but the expected headway between trains,
curves, grades, and other conditions affecting train speed and braking
distances, and many other factors that must be balanced to preserve safety
while maximizing the number of people who can be transported per unit time.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='sigtype'/><h2>3.2 Types of Signals</h2>

<p><span>There are five basic categories of
signals used in the subway, whose distinctions must be understood if one is to
be a motorman, let alone a towerman! While some attributes, such as being a <a href="#timesig">time
signal,</a> are applicable to several of them, these distinctions
between these categories underlie the notion of interlocking.</span></p>

<p><span><img align='right' src='auto.bmp'/>The most <a name='automatic'/> fundamental
kind of signal is an <b>automatic signal.</b> They look like the illustration at
right. Note that it has one head
with two or three lenses, at least one of which is not red. An automatic signal is not controlled by
an interlocking, for, by definition, its state does not affect the
interlocking. Therefore, an
automatic signal is controlled only by track occupancy (i.e., the presence,
absence, and movement of trains in its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control length</span>),
including timers dependent on track occupancy, as with <a href="#timesig">time signals.</a> Automatic signals are the only kind present in the vast majority of the
subway system, that is, between <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_xlkg">interlockings.</span> When represented
on an interlocking panel, automatic signals do not have <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever</span>
numbers (or, in real life, <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK lights,</span> but in <b>NXSYS</b> they
do). Automatic signals and approach
signals implement <a href="#ak">automatic key-by (AK).</a></span></p>

<p><span><img align='right' src='home.bmp'/>The second most <a name='home'/> fundamental kind of signal is a <b>home signal.</b> A home signal is always controlled by a <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever</span>
of an interlocking, in addition to track occupancy and possible timers. Here is an illustration of one. The signal's <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever</span>
number appears on its lower head. A
home signal always has more than one multi-lens head. The upper head has the same meaning as
with an automatic signal (proceed, proceed prepared to stop at next signal,
stop). The lower head tells whether
a normal or diverging route is set, yellow being
the latter. Red always appears
together in both heads. A home
signal is used whenever a switch is protected, facing or trailing, including
all cases of a choice of routes, or potential conflicting movements are
involved. When a home signal
indicates double-red, the indication is &quot;stop and stay:&quot; there is
never any <a href="#ak">Automatic Key-by</a> to clear the <a href="#stops">train stop</a> of a home signal. There is, however, <a href="#callon">call-on,</a> which is indicated by the single yellow light at the
bottom of the signal, which allows the train stop to be cleared by cooperation
of the motorman and the towerman in highly restricted circumstances (see <a href="#callon">the call-on description</a> for details).</span></p>

<p><span>The third <a name='apsig'/> most common kind of
signal is an <b>approach signal.</b> An approach signal looks just like an automatic signal (the illustration
above is actually the former!); there is no easy way for a motorman to tell the
difference (although in New York, approach signals have their interlocking
number plates on their sides), but that is not a problem, as the meaning of
either to him or her, and the behavior of their <a href="#stops">stops,</a>
is the same. Approach signals are
controlled by interlocking <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">levers</span> (actually pushbuttons on an
NX panel), and can be forced red by being <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_cancel">cancelled</span> by the
towerman at any time. Approach
signals never actually protect switches or govern conflicting routes, but their
<span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control lengths</span> frequently encompass <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_trps">trailing-point switches</span>
or interlocking exits.  Calling an approach signal can move a
switch; cancelling an approach signal may be necessary before certain routes
can be set up. Although to a
motorman an approach signal appears the same as an automatic signal, to the
towerman it is represented in the same way as a <a href="#home">home
signal,</a> that is as a <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span> with a <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever</span>
number. Approach signals play an
important role in <a href="#aplock">approach locking.</a> Approach signals are sometimes combined
with <a href="#stationtime">Station Time (ST) timing</a>
for a particularly complicated behavior described <a href="#intst">elsewhere.</a></span></p>

<p><span><img align='right' src='dwarf.bmp'/>The two <a name='dwarf'/>remaining
kinds of signals are fairly rare. <b>Dwarf signals</b> are interlocked signals
with only red and yellow lights, low on the ground, intended to govern
low-speed, rare train movements, usually in the reverse direction or in or
toward yards. A recent visit to New
York seemed to indicate that dwarf signals may be obsolete; they are inferior because they are hard
to see, do not indicate which of a possible selection of routes has been
cleared, and perhaps worst of all, lack <a href="#stops">train
stops.</a> Yet, they are
traditional, and the author owns one (K3-343 from East New York Tower 3
Interlocking). A dwarf signal's <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control
length</span> does not check for track occupancy, and it may lack a <a href="#stops">train stop.</a> As with a <a href="#callon">call-on,</a>
a train operator accepting a &quot;proceed&quot; indication from a dwarf signal
must be prepared to stop within vision.</span></p>

<p><span><img align='right' src='marker.bmp'/><b>Marker signals,</b>
<a name='marker'/> such as 30 and 38 at Progman St., are dummies that are always red, and are
there to forbid movement unconditionally and serve as placeholders in the
interlocking. They are extremely
uninteresting because they never change state. Marker signals may or may not have <a href="#stops">train stops.</a></span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='nxo'/><h2>3.3 Basic NX Interlocking Operation</h2>

<p><span>The basic idea of an NX (&quot;E<b>N</b>trance-E<b>X</b>it&quot;)
<span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_xlkg">interlocking</span> is to route trains over the interlocking by
specifying the starting point <span>(entrance) </span>and
ending point <span>(exit) </span>of each such path. On a real NX interlocking panel, buttons
are pressed at the points representing the entrance and the exit; in <b>NXSYS,</b> the points are moused,
signal <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK lights</span> for the entrances, and the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit lights</span>
that subsequently light up for the exits.</span></p>

<p><span><img align='right' src='exit.bmp'/> When you <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiate</span>
a route at a <a href="#home">home
signal</a> (or <a href="#dwarf">dwarf</a>) by clicking
left on its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light,</span> such as Signal 22 shown here, the
interlocking will respond by lighting the GK light red. It will send out seeking-tendrils over
all routes in that direction emanating from that point, and offer a choice of
exits by displaying <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit lights</span> at each possible exit. Every possible consideration of switches
that are locked and conflicting routes, i.e., the current situation, as described by other sections in this
chapter, will be factored into the choice of which exits are offered. If no exits are possible, the
interlocking will (usually) not let you initiate at all (the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span>
will not turn red, and no exit lights will light up).</span></p>

<p><span>At that point you can click on one of
the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit lights:</span> this is called route <b>completion,</b> and
causes electrical tendrils to spread out from the exit to seek the tendrils of
the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiating</span> signal: when they meet, they will enwrap each other, cancel all other <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit
lights,</span> and turn on the entrance light (which
looks just like an exit light) at the point of initiation, so you know that
this has happened. At this point, the interlocking will cause all switches to
move and all encompassed <a href="#stops">train stops</a>
to be lowered such that that route is actually set up and the initiating signal
to be called and probably cleared. This is called &quot;route selection,&quot;
and is the basic operation of an NX/UR interlocking.</span></p>

<p><span><a name="urx"/>Instead of clicking on the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit
light</span> at a signal, you may also click on the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK Light</span>
for the signal itself; this feature was pioneered by the IRT, and Union Switch
&amp; Signal, hence it is called here the <b>UR exit feature.</b>  The interlocking will determine
that the signal is being selected as an exit, even if soon it will be an
entrance, too. (Normally, the
signal in the <i>direction opposite to traffic</i> is the one to select for an
exit, unless there is none such, such as at Signals 10 and 24 at Progman St.,
when it is said that &quot;the entrance and exit are in the same
direction&quot;, and the signal is both at once. Try clicking slowly on 8, 10, 10, 14,
then cancel, then 8, 14 to see this.)</span></p>

<p><span>At that point, when the route is all
set up, white lines of light will indicate the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track sections</span>
which form the route. You may play
with trains, or cancel the route at any time by clicking on the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span>
of the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiating</span> signal. (You can cancel the initiation at any time in this way, even before
completion.)</span></p>

<p><span>The NX interlocking takes it upon
itself to operate the imaginary <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">levers</span> of the switches and
signals in the route in the proper order. However, you might find, when initiating a route, that not all the exits
you expected are offered: you will
then have to figure out why (after having read the rest of this chapter), and
cancel conflicting routes and/or move trains out, as would a real towerman.</span></p>

<p><span>When you <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiate</span> a
route, you may see the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK lights</span> of other signals, or the some
switches on the panel, begin flashing in unison. This indicates that they are preventing
some routes and exits from being offered that otherwise would be. See <a href="#lockconflicts">Locking
Conflict panel indications</a> for more information on this.</span></p>

<p><span>Both <a href="#scenarios">supplied
interlockings</a> implement a features called <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_etoe">end-to-end</span>
route selection (or, more recently, &quot;through routing&quot;), whereby NX selection over successive
sub-networks, such as the diamond crossovers, relay initiations and completions
from one to the next. Thus (at <a href="#progman">Progman St.</a>) when one <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiates</span>
a route at 4, one will see not only 30 and 10 as exits, but 14, 20, and 24 as
well. If one selects one of the latter as exits, not only are other offered
exits cancelled, but ultimately signal 10 is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called</span> in the
middle of the route as though it itself had been the initiator. If, however, you wish to cancel an
end-to-end route once it has been set up, you must do so signal-by-signal (or
use the heavy hammer of the menu item </span><b>Interlocking|Cancel
all signals.</b><span>)</span></p>

<p><span>For a <i>tour-de-force</i> of
NXSYS/Progman St. power, initiate at 20 and complete at 34 in the upper left
corner. Now cancel 16, 18, and 20 ,
deposit a train in A1-720 (the track section between 16 and 18 on track A1),
and try the experiment again. NX/UR interlocking through-routing must choose
the best of all possible paths when several are available between a given
entrance and exit.<br clear=all style='page-break-before:always'>
</span></p><a name='sigrout'/><h2>3.4 Signal Calling (Requesting)</h2>

<p><span>Signals that can potentially affect
each other and be affected by switches must be controlled by the interlocking
such that their interactions be safe. Each signal is conceptually associated with a <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever,</span>
which in earlier interlockings was an actual lever, controlled by the
towerman. In an &quot;all
relay&quot; interlocking such as <b>NXSYS,</b> the lever is imaginary, and its
effect is simulated by logic. If
the lever is in its normal position (&quot;cancelled&quot;), the associated
signal is guaranteed to be red. Only when the lever is moved to its other, <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called,</span>
position, is the signal able to clear in response to train movement.</span></p>

<p><span>Therefore, the levers controlling
signals are interlocked with each other -- they could not be moved out of their
normal (signal may not clear) position unless other levers controlling other,
conflicting signals are in their normal position. Of course, exactly which signals
conflict is highly dependent upon switch position, which is in turn constrained
by signals and so on.</span></p>

<p><span>In an NX interlocking implementation
such as <b>NXSYS,</b> signal levers are not operated directly, but are
controlled automatically by the route selection mechanism (see <a href="#nxo">Basic NX Operation</a>). It is possible to &quot;cancel&quot; any
signal, though, that is, move its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever</span> to the
&quot;normal&quot; position simply by clicking left on the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span>
of the signal you want to cancel.</span></p>

<p><a class='def' dref='#DEF_lever'>Levers</a> <span> for <a href="#apsig">approach signals</a> are more or less
controlled directly by clicking on the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light:</span> clicking on one
which is not called attempts to call it (succeeding if and only if clearing the
signal would be safe), and clearing it when permissible; clicking on a called
signal, clear or not, cancels it.</span></p>

<p><span>Note that the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span>
for a <a href="#home">home signal</a> will come on (red)
when a route is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiated</span> there; you can tell that it is not really
called yet, i.e., the route not yet set up, by the possible presence of <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit
lights</span> and the absence of white lines of light, indicating routes
successfully set up.</span></p>

<p><span>A called signal will not clear until
certain conditions are met. These
conditions are the lack of trains (except for <a href="#callon">call-on</a>)
and conflict along the signal's <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control
length</span>.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='fleet'/><h2>3.5 Auto-cancel and Signal Fleeting</h2>

<p><span>At active interlockings, it is quite
common to set up a different route for every train, that is, very few
successive trains take the same route. In these cases, it is convenient for a train could &quot;cancel its own
route,&quot; that is, clean up behind itself to facilitate subsequent setup for
the next train, reducing the possibility that the following train will accept
the same route by virtue of inaction. In other cases, especially at inactive
interlockings, it is more convenient to establish routes and leave them set
indefinitely for many successive trains.</span></p>

<p><span>NX/UR interlockings provide both
modes of operation. The default is <b>auto-cancel:</b>
when a train passes a <a href="#home">home</a> or <a href="#apsig">approach</a> signal, the signal will be
cancelled and the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span> on the panel will go dark. Although the first <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track section</span>
beyond the signal will show red (<span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied</span>), subsequent sections
will still show white and remain part of the route, lit up in white, held by <a href="#routl">route locking</a> until the train passes
through.</span></p>

<p><span>To cause a signal to remain <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called,</span>
it must be <b>fleeted.</b> (The term comes from the letting 'the fleet' pass
through.) On a real NX panel, this
is done by turning the signal button (which is normally pushed) in the
direction of traffic. This turning operation also pushes it. When the signal is fleeted, the call for
the signal, will not be cancelled by the track occupancy resulting from train
motion. <a href="#dwarf">Dwarf signals</a> may not be
fleeted, <a href="#apsig">approach</a> and <a href="#home">home signals</a> may.</span></p>

<p><b>NXSYS</b><span> simulates the
fleeting control with Shift-Mouse-left, that is, clicking left on a <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span>
while holding the <b>Shift</b> key down. The rules are a bit tricky, but fairly natural once used and
mastered. Clicking shift-left on a
signal (home or approach GK light) which is not <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiated</span> (shows
blank) initiates and fleets it. The
fleeted status in <b>NXSYS</b> is shown by a little green line underneath the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever</span>
number <img align='right' src='fleet.bmp'/> next to the signal. Clicking shift-left on a fleeted signal un-fleets it, but does not
cancel it. Clicking left <i>without</i>
shift on a fleeted signal, however, both un-fleets and cancels it
simultaneously.</span></p>

<p><span>Multiple <a href="#home">home</a> or <a href="#apsig">approach signals</a>
in a route created by <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_etoe">end-to-end</span> selection (see <a href="#nxo">Basic NX Operation</a>) must be fleeted
individually.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='slock'/><h2>3.6 Switch Locking</h2>

<p><span>Moving the points of a switch while a
train is on that switch, or about to hit it, is, obviously, extremely unsafe,
and guaranteed to cause an accident.. Switch movement must be inhibited when the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track sections</span>
of a switch are <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied,</span> or a route is set up (or
&quot;lined&quot;) permitting train movement over it.</span></p>

<p><span>Interlockings provide a facility
called &quot;switch locking&quot; which permits the movement of the switch only
when the proper set of conditions prevails. When the switch may not be moved, it is
said to be &quot;locked;&quot; it may only be moved when &quot;unlocked.&quot;
In <b>NXSYS,</b> if you click right on a switch (see <a href="#mouse">Using the Mouse to Control the Interlocking</a>), and it does not
respond by flashing red and changing state, that is because (assuming you have
clicked accurately) it is locked.</span></p>

<p><span>If you see a line of red lights (see <a href="#litup">What the various lit-up things mean</a>) on
the switch or any part of its track sections, that is a train, and that is why
it is locked. This type of locking is called &quot;detector locking.&quot; The
switch will be unlocked only when that train clears the switch track section
limits, if all else is OK. If you see a line of white lights, that means a
route is set up by some signal further back along the white lights, or already
in progress (see <a href="#routl">Route Locking</a>), in
which case the switch will not be unlocked until the train is gone.</span></p>

<p><span>If the switch still will not move, it
may be because it is within the far extent <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_ovlp">overlap</span> the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control
length</span> of some signal further back, and the proposed movement would
set a <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_trps">trailing-point switch</span> against that signal. In this case, you must cancel that
signal, which locks the switch, before attempting to move it. The interlocking will usually flash the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK
light</span> of that signal and the points of the switch in the position
they are locked when you try to <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiate:</span> see <a href="#lockconflicts">Locking Conflict panel indications</a>
for more on this.</span></p>

<p><span>Switches are also locked by the <a href="#stops">train stops</a> of all signals around
them. No matter what the excuse,
all surrounding stops must be up, that is, in &quot;tripping&quot; position,
before a switch may be moved. For
this reason, the interlocking will often a hold a signal at the exit of a
sub-section red, so that its stop will not lock switches in approach to
it. To see this in action at <a href="#progman">Progman St.</a>, try clearing a route from
10 to 14 both with a route from 8 to 10 and without. 10 will not clear, nor its stop, if
there is neither a route nor a train (perhaps reversing) in approach to it.</span></p>

<p><span>In <b>NXSYS,</b> interlockings, as
well as many real ones, you can tell by inspection if a switch is locked by
looking at its <a href="#lockind">switch lock indicator light.</a> Associated with a switch's <a href="#auxkeys">auxiliary key,</a> the switch lock
indicator lights the key in dark red when the switch is locked. When switches are free to move (not
locked), they can be moved demonstrably via the <a href="#auxkeys">auxiliary
switch keys.</a></span></p>

<p><span>Again, in an NX interlocking, one
does not usually move switches explicitly, but via route selection (see <a href="#nxo">Basic NX Operation</a>). Nevertheless, the route selection
mechanism might refuse to offer certain exits because the switches that would
have to be moved to line up a route route to that exit are locked, and may not
be moved to the required position.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='aplock'/><h2>3.7 Approach and Time Locking</h2>

<p><span>Approach locking and time locking are
consequences of the fact that trains are big and heavy and, when moving fast,
take a long distance and time to come to a halt, no matter how hard the brakes
are applied.</span></p>

<p><span>Consider the following schematic
scenario:<br/><br/><img align='left' src='aplock.bmp'/><br/><br/>Imagine that switch 5 is set
to a diverging route. By all that
should now be understood, this means that signals 2 and 4 must be red (of
course, 2 must be red because of the train), and cannot even be <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called.</span></span></p>

<p><span>Now suppose that switch 5 was set to
the normal route, and both signals were clear. Suppose a train on 225 as shown were
moving rapidly, and as the train approached signal 4 and the switch, the
towerman cancelled signal 4 in the face of the moving train, making it (or both?)
red, and then caused the switch (5) to move, while the train was still
barrelling towards 4 and 5. Nothing
so far would prevent this -- the train would indeed be tripped by the stop and
signal at 4, but would take a long distance to slow down, and would doubtless
run the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_trps">trailing point switch</span> and damage it and/or be derailed.</span></p>

<p><span>Cancelling a signal <i>at any time</i>
cannot be made impermissible or prevented -- it is a safety feature that a
train may be stopped at any time. But telling the interlocking that &quot;all is OK, 4 is safe at
stop&quot; (and hence, switch 5 may be thrown) when there is a train coming at
it is not satisfactory.</span></p>

<p><span>The solution to this problem is <b>approach
locking.</b> When a train is
approaching a <a href="#home">home signal,</a> and it is
cancelled by the tower, the route will drop and the signal will go red, but the
rest of the interlocking will not &quot;believe&quot; the cancellation: the
route will lock out other routes and hold switches locked via <a href="#routl">route locking.</a></span></p>

<p><span>Of course, it might be so that the
train has been sitting there for a while, and is not moving rapidly. As just explained, approach locking
would make it impossible for the towerman to change his or her mind with a
train facing a signal. The solution
to this is <b>time locking.</b> Approach locking will release after a sufficiently long period of time,
9 or 10 seconds in <b>NXSYS.</b> If
this is too long for you, the menu item </span><b>Interlocking|Release all approach locking</b><span> will release all
approach timers immediately. Approach locking will also &quot;quick release&quot; as soon as a train
gets into the route (&quot;accepts&quot; it), so that <a href="#routl">route locking</a> can take over. Time locking in non-rapid-transit
railroads is sometimes measured in <i>minutes.</i></span></p>

<p><span>The approach locking of <a href="#apsig">approach signals</a> is one of the chief
reasons for their existence. Consider again this illustration:<br/><img align='left' src='aplock.bmp'/><br/>Imagine
that the train is not there, that signal 2 has been clear for a long time, and
4 has been in the cancelled state for a long time, and the switch is set for
the main route (but no route is set up over it). The interlocking has &quot;believed&quot;
that 4 has been cancelled (approach locking has been satisfied) for a long
time. Again, 2 was <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called</span> a long time ago, and is clear.</span></p>

<p><span>Although in this state, signal 2
would have to be yellow because 4 is red, imagine that a train is coming along
at high speed and fails to observe the yellow signal, and continues through 2
at high speed. As soon as it passes
2, the towerman cancels 2 (if <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_fleet">fleeted,</span> or lets it auto-cancel)
and moves the switch. Nothing now
prevents the train from tripping at 4 and derailing at high speed.</span></p>

<p><span>The solution to this is approach
locking for the approach signal 2. The interlocking will not &quot;believe&quot; that 2 has really been
cancelled if there is a train <i>past</i> it, i.e., in section 225, at the time
it is cancelled, until time-locking for 2 expires. Time locking timing starts when a signal
is cancelled.</span></p>

<p><span>Thus, it would be impossible for the
switch to be moved or a conflicting route to be set up unless 2 was either
cancelled for &quot;a long time&quot; or there was no train in the
&quot;approach section.&quot; The
problem stops there-- the train cannot pass 2 without coming to a full stop,
and thus, its speed at 4 would be limited.</span></p>

<p><span>(In fact, there is a small
&quot;window of opportunity&quot; between the time 2 is cancelled and 2's stop
gets to come up that could allow 2's approach locking to release without
tripping the train at 2 if misfortune lines up &quot;just right&quot;: for this
reason, section 223 must also be part of 2's approach section. For consistency, the standard design
would add 223 to 4's approach limits, too.)</span></p>

<p><span>To see approach locking in action at <a href="#progman">Progman St.,</a> drop a train in section
A2-700 (between 2 and 4). Set up a
route from 4 to 10. Cancel the
route by clicking on 4. The white
lights will not go out for 9 seconds (unless the train is removed). You can observe that during this
interval, not only will switches 7 and 9 be locked, but 17 as well.</span></p>

<p><span>A signal's approach locking is
released by one of three occurrences: (1) The signal is cancelled when there is
no train within its approach limits (2) The time-locking time has run to
completion since the signal was cancelled, or (3) so-called <b>quick release,</b>
often omitted for <a href="#dwarf">dwarf</a> and other
rarely-called signals, which occurs when a train occupies the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track section</span>
that would lock the switch that the signal is protecting (here 227): when the
train enters that section, the signal's approach locking is no longer needed.</span></p>

<p><span>The above grows in complexity when a
home signal such as 8 at <a href="#progman">Progman St.</a>
locks a switch that it does not immediately protect, i.e., a switch in the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_ovlp">overlap</span>
of its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control length,</span> (in this case, 17 at Progman St.). In
this case, the home signal (8) is acting as an approach signal to signal 10 and
switch 17 in addition to being a home signal protecting its immediate switch
network. Thus, the quick release of
8 cannot occur until the train has touched the detector track sections of that
distant switch (17, i.e., track 4714) and the local switch (7/9, 4707)
simultaneously, and the sections between the signal and the distant switch it
locks must be part of its approach section.</span></p>

<p><span>Approach locking timeouts in both New
York and Toronto are normally 30 seconds; <b>NXSYS</b> interlockings have
shorter timeouts to forestall boredom. In <b>NXSYS</b>, any signal's approach locking can be reset individually
from its <a href="#controlright">context menu</a> before
it has rightly timed out, and <b>all</b> approach locking can be prematurely
timed out by the <b>Interlocking</b> menu or typing <b>Control-A</b>; both of
these operations have no analogue in real interlockings, are patently
(railroadwise) unsafe, and are there for debugging and simulation convenience
only.</span></p>

<p><span>&quot;If this sounds complicated,
that's because it is.&quot;</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='routl'/><h2>3.8 Route Locking</h2>

<p><span>Route locking is an interlocking
feature which allows all the effects of a routing to continue to hold once a
train has entered (&quot;accepted&quot;) the route, even if the signals are, as
is usual, cancelled shortly thereafter. It is a technique for semipermanently associating a train with a given
route in a given direction and an intent to follow that route: it ensures that
a train which has accepted a route is &quot;just as bad&quot; as the cleared
signal it accepted, as far as the locking of switches (see <a href="#slock">Switch Locking</a>) in the route and potential conflicting
movements (see <a href="#clength">Signal Control Length</a>)
are concerned.</span></p>

<p><span>Route locking can be demonstrated at <a href="#progman">Progman St. Interlocking</a> (in its
default state) by setting up a route from 24 all the way to 4 on the Northbound
Local track (click left on signal 24, then click left on the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit light</span>
which will appear at signal 4). Once switches move, the route should be cleared and lit in white. Now cancel 24 by another click on its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK
light,</span> and the route vanishes. Now set up that route again, but this time move a train in off the right
edge of the map into track A3, and then past signal 24: the signal will <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_cancel">auto-cancel,</span>
but the route will still being held and lit up in white. As the train moves southward, the route
will still be held (preventing routing of 6 or 2, for instance). But as the back of the train clears <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track
sections,</span> you will see them go dark, as the route locking
drops out.</span></p>

<p><span>Route locking is also frequently used
at interlockings of more than one &quot;network&quot;, or
&quot;sub-interlocking&quot;. In
the layout below, there are two networks, one consisting of signals 2, 4, 6,
and 8 and switches 5 and 7, and the other the remaining switches and signals
(10, 12, 14, 16, and 18, switches 13 and 15).</span></p>

<p><span><img align='center' src='mnet.bmp'/></span></p>

<p><span>In the above diagram, route locking
would usually be provided for track sections 127 and 227, to ensure that a
train exiting one network toward the other prevents the establishment of an
exit facing its motion as long as that train occupies the trackage between
them. For example, if a southbound
route were established from 4 to 6, and a train accepted the route, southbound
route locking of section 227 would prevent an exit at 10 (i.e., northbound,
from an entrance at 14 or 16) from being selected as long as that train
occupied any track on the route between 4 and 10.</span></p>

<p><span>Route locking is one of the criteria
used in <a href="#slock">Switch Locking.</a></span></p>

<p><span>The <b>Release All Approach Locking</b>
<a href="#menu">menu</a> command also releases all route
locking.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='timesig'/><h2>3.9 Time Signals</h2>

<p><span>Sometimes, in addition to the
performing the functions discussed under <a href="#clength">Control
Lengths,</a> signals are equipped with timers to restrict the speed of
trains. These &quot;time
controls&quot; can be used with any type of signal (except <a href="#dwarf">dwarf</a> or <a href="#marker">marker</a>),
and add a new facet of functionality. Time control occurs in two forms, <b>Grade Time (GT),</b> which restricts the speed of trains
unconditionally, and <b>Station Time (ST),</b> which allows a signal to shorten
its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control length</span> if a train approaches it at restricted speed. GT is easier to understand, and will be
explained first. ST will be
explained <a href="#stationtime">subsequently.</a>.</span></p>

<a name='gt'/><h3>Grade Time (GT) Signals</h3>

<p><span>GT (Grade Time) signals are so called
because they are used on grades (slopes) and around curves. They operate by not clearing until the a
train has spent a sufficient number of seconds in the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track sections</span>
in front of the signal to be evidence of low enough speed.</span></p>

<p><span>In <a href="#progman">Progman
St. Interlocking</a>, the signals A2-725, A4-720 and A4-727 on the
northbound tracks are GT signals; that is why they come up red. They will not clear until a train has
been in track sections A2-714, A2-720 long enough, or more complicated
conditions on the Northbound Express track. Deposit a train in A2-720 (between 720
and 725) and wait five seconds to see A2-725 clear. See the description of <a href="#islington">Islington</a> for a list of GT signals
there.</span></p>

<p><span><img align='right' src='lunar.bmp'/><a name="lunar"/>The simplest kind of
GT signal is the &quot;one shot&quot; GT, which, in New York, has a single
bright white (&quot;lunar white&quot;) lens, which, when it is displayed with
red (and it is displayed no other time) indicates that although it is red, the only
reason is that the GT timer has not &quot;timed out&quot;, or run its full
course, and if the signal is approached sufficiently slowly, it will
clear. This is called a
&quot;one-shot&quot; GT signal. The
lunar white indication is used slightly differently in Toronto: there, it is on
the signal <i>before</i> a GT signal, and indicates that the latter has not
cleared because of time alone.</span></p>

<p><span>Sometimes more than one <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track
section</span> in front of a GT signal can be used to time and
clear it. In that case, the signal
in between the train and the GT signal will go from yellow to green at the same
time the train times out the GT signal. To see this at Progman St., bring up <a href="#fullsig">Full
Signal Displays</a> of all the signals on the A4 track, route signals 8
and 10, and move a train very slowly northward, section by section. The idea here is that the train operator
gets two chances to achieve the right speed, and need not fear being <a href="#stops">tripped</a> if he or she should fail the
first time. This is called a &quot;2-shot (or 2-try) GT signal&quot;: it has
two independent timing sections, the latter of which is run if and only if the
first is not satisfied (unless it is shared with the next signal in a series of
2-shot GT signals).</span></p>

<p><span>The GT timeouts on <a href="#progman">Progman St. Interlocking</a> are defined
by the &quot;US relays&quot; in <b>progman.trk,</b> and are 4, 5, or 6 seconds
as appropriate. (Normally, the time
constant is calculated as would be expected, i.e., the quotient of the track
circuit length and the desired speed, but as <b>NXSYS</b> train kinematics
still leave room for improvement, these fairly arbitrary numbers have been
chosen).</span></p>

<p><span><img align='right' src='fsd.bmp'/>When a 2-shot GT signal
is red for <b>only</b> the reason that its timer has not timed out yet, that
is, traffic or interlocking reasons are not holding it red, and the signal
before it is clear, that latter, nearer signal will not only indicate Yellow
(prepare to stop), but have a lit-up &quot;S&quot; under the first head. This can best be seen on signal 10
(A4-714) at Progman St. Set up a
route from 8 to 14, and click right on signal 10 to watch it. The &quot;S&quot; will be present on
10. Putting a train in section 727
will negate this condition, and cause the &quot;S&quot; light to go off. The &quot;S&quot; light tells the
motorman that by his or her going slowly enough the next signal (i.e., the one
after the one with the &quot;S&quot; light) will clear.</span></p>

<a name='stationtime'/><h3>Station Time (ST) Signals</h3>

<p><span>Although Station Time (ST) signals
are extremely common in New York, there are none at the fictitious <a href="#progman">Progman St.</a> There are three fairly complex ones
(X48, X20, X18) at <a href="#islington">Islington Interlocking</a>. Station Time facilitates trains
&quot;closing in&quot; on stations to keep them moving, albeit slower, when
trains are stopped ahead in a station. Here is the canonical situation: </span></p>

<p><span><img align='center' src='st.bmp'/></span></p>

<p><span>The <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control length</span> of
signal 237 is shown as extending from the signal itself downtrack to IJ
243. That is, if any portion of a
train appears between <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_IJ">insulated joints</span> 237 and 243, 237 will
display a red, &quot;stop&quot; indication to oncoming traffic. Referring to the earlier discussion of <a href="#clength">control length,</a> it can be seen that
these 600' control lengths imply a safe braking distance between 200 and 400 feet.</span></p>

<p><span>If there is a train, or portion of a
train <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupying</span> the &quot;dotted portion of the control
length&quot;, that is, between 241 and 243, but no portion of any train in the
&quot;solid portion of the control length&quot; between 237 and 241 (that is,
the end of a train is in the station), a new condition obtains: a second train approaching 237
sufficiently slowly to &quot;time out&quot; the section between 235 and 237
will cause signal 237 to &quot;cut back&quot; its control length to the solid
portion, effectively ignoring the train in the dotted portion. Of course, this
is not unsafe, because signal 239 will still enforce a separation (with the
normal policy of <a href="#stops">stops</a> for <a href="#automatic">automatic</a> and <a href="#apsig">approach</a> signals, 241 will not). If the train is going slow enough to
cause 237 to cut back its control length, it would be able to brake in the 200'
between 239 and 241. This reduces
the minimum separation between trains in approach to stations.</span></p>

<p><span>An ST signal allows trains to
&quot;close in&quot; on each other by acting like a <a href="#gt">GT signal</a> if only the dotted portion of its control length is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied.</span> Some signals are GT and ST at the same
time; the ST timing must obviously be slower than the GT timing if this is to
be meaningful. A yellow sign with a
&quot;T&quot; on it (and often the ST speed limit) indicates the start of a
timing section for ST. Often, several ST signals occur in sequence to
coordinate this situation.</span></p>

<p><span><img align='right' src='sts.bmp'/>The signal at right
displays the standard New York aspect for an automatic ST signal in the
&quot;ST&quot; state, that is, a train occupies only the dotted portion of its
control length. The &quot;20&quot;
indicates that the signal must be approached at 20 miles per hour to time out
its ST: it is only lit when the the signal is red, but actually <i>will</i>
clear if approached sufficiently slowly. In older New York signalling, and at <a href="#islington">Islington</a>,
the ST signal has no special indication for its ST state.</span></p>

<a name='intst'/><h3>Interlocked
Station-Time Signals</h3>

<p><u></u></span></u><a href='#stationtime'>Station Time (ST)</a> explodes <span> in complexity when combined with
interlocking. When the dotted
portion of an interlocked signal's control length encompasses <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_trps">trailing-point
switches</span> and possible conflicting routes, the conditional nature of
the signal's control of that region of track has implications throughout the
interlocking. Some interlocked ST
signals actually cause conflicting switches and routes to be cut out of the
control line when the latter is cut back. The policy employed with the three ST signals at <a href="#islington">Islington</a> is that of the NYCTA standard in this case, as
follows. This is quite complex; please read it carefully.</span></p>

<p><span>When an attempt is made to route an
interlocked ST signal with this feature, a determination is made as to whether
the &quot;dotted portion&quot; contains conflicting routes or <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_trps">trailing-point
switches</span> thrown against the route that cannot be moved now
(&quot;bad switches&quot;). If
there are no conflicting routes or non-movable &quot;bad&quot; switches in the
dotted portion, the signal is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called</span> &quot;wholesale&quot;,
and such bad switches in the dotted portion that need be moved are -- it then
behaves as above over its route, and locks those switches and fully governs the
section. If there are conflicting
routes in the non-dotted portion, the signal cannot be called. But if there are conflicting routes or
non-movable bad switches in the dotted portion and only the dotted portion, the
signal routes and clears in a &quot;restricted form&quot;, whereby it does <i>not</i>
move the switches, but displays an ST aspect (in New York), and requires ST
timing to clear at all. If the &quot;bad switches&quot; subsequently move to a
non-conflicting state (but <i>not merely unlock</i>) by virtue of some other
manipulation while the signal is in this state, the signal advances
automatically to the &quot;wholesale called&quot; state, and clears.</span></p>

<p><span>In short, when an attempt is made to
route an interlocked ST signal of this kind, if a conflicting situation in the
dotted portion of the control length can be cleared at that time, it will be,
but if not, the signal will be <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called</span> but not cleared, and
will only clear on station time. If
and when the conflicting situation in the dotted portion is resolved by other
action, the signal will clear.</span></p>

<p><span>This model is implemented in full for
signals X48, X20, and X18 at <a href="#islington">Islington,</a>
and may be investigated there.<br clear=all style='page-break-before:always'>
</span></p><a name='stops'/><h2>3.10 (Automatic Train) Stops</h2>

<p><span>Unlike street traffic lights, subway
signals can force disobedient traffic to stop. Next to each signal (except some <a href="#dwarf">dwarves</a>) at track level lies a T- or
hammer-shaped apparatus, controlled by motors on the BMT/IND and air on the
IRT, which rises (via a counterweight, for safety reasons, when not actively held
down) to an upright position more or less when the associated signal is
&quot;red,&quot; and wants trains to stop. This <b>trip,</b> or <b>train stop,</b> will engage a brake
valve on the underside of a passing train and <b>trip</b> it, i.e., cause the
train to screech to an emergency halt.</span></p>

<p><span>The &quot;more or less&quot; is due
to the fact that a signal turns red as soon as the front of the first car of
the train passes it, and care must be taken not to trip the rest of that very
train. Also, trips for signals that
are being passed backwards, such as at interlockings, must be carefully cleared
(put &quot;down&quot;, i.e., not &quot;tripping&quot;) when routes are cleared
over them, and restored when the train is passed or the route cancelled, lest
they trip the train by hitting the brake valve in the wrong direction (this is
known as <b>off-side tripping.</b>)</span></p>

<p><span>It is important to be able to see the
state of train stops in a world where you are both motorman and towerman. Even given Cab View, you might want to
see all the train stops to help you learn about them. On a real NX panel, stops are not
shown. <img align='right' src='stop.bmp'/> <b>NXSYS</b>
displays train stops as little triangles on the right of the track (seen in the
relevant direction of motion), as per IRT convention, but also creating a
visual association with the correct signal. By default, the triangle is shown red
when the stop is in the tripping position, and not shown at all when it is
clear. Via the menu item <b><a href="#showstops">Other|Show Stops</a></b> you can elect
to show them this way, at all times, in which case they will be yellow when clear,
or never, as on a real panel. They
are also fun to watch, especially as they come up behind the ends of trains,
proving that the interlocking is indeed working correctly. They are especially interesting in the
case of reverse-direction routes.</span></p>

<p><span>Unless you have chosen never to see
stops on the panel (as on a real NX/UR panel), the little stop triangles will
flash rapidly when the stop is in motion, flashing red when the stop is moving
to tripping position, and flashing yellow when clearing. As in real life, it takes about a second
to move the stop. A signal will not
clear until its stop is fully cleared (although its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span> will
indicate &quot;clear&quot; before the stop begins to clear). If you have a <a href="#fullsig">full signal display</a> up, an animated graphic of the stop
moving will be visible.</span></p>

<p><span>All signals except some <a href="#dwarf">dwarf signals</a> and some <a href="#marker">marker signals</a> have stops.</span></p>

<p><span><a name='ak'/><a href="#automatic">Automatic</a>
and <a href="#apsig">approach signals</a> implement a
feature called <b>automatic key-by,</b> (&quot;AK&quot;) whose use, has in
recent years been forbidden in New York, unless explicit permission is given by
radio, due to accidents resulting from abuse. But it is implemented in the wiring, so <b>NXSYS</b>
signals implement it. This feature
allows you to pass a red automatic or approach signal if you creep up to it
extremely slowly: the relative
placements of the train wheel, trip valve, <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_IJ">IJ</span> and stop are
sufficiently carefully worked out that if a train crawls past the IJ of such a
signal, the stop will drive (go down). To do this on <b>NXSYS,</b> you must be in <b>Free Will</b> mode on such
a train (track sections <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied</span> or vacated by the &quot;mouse
from Heaven&quot; are not trains, and thus not subject to train stops!), and
perform this maneuver at a speed of less than 5 &quot;sim units&quot; per
second, which requires, intentionally, extreme care. As in the real world, you may not, and
will not be allowed to, &quot;key by&quot; a <a href="#home">home
signal.</a></span></p>

<p><span>Because the standard implementation
of AK optimizes the use of the same track relay contact to support
reverse-direction motion, you may observe that the stops for automatic signals
do not come up immediately behind a train, but at a distance of one <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track
section</span> behind the train. For this reason, <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_ovlp">overlap</span>
of <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control length</span> is critical if stops for automatic signals are
to have any efficacy. Yet another
advantage of this technique is the saving in lengthy and expensive copper
wiring in <a href="#automatic">automatic signal</a>
territory, where checking the section in approach to the signal and stop would
require an additional wire back to the previous signal.</span></p>

<p><span>There is also the <a href="#callon">call-on</a> feature, which allows a
&quot;manual key-by&quot; past home signals in certain very special
circumstances. The motorman and the
towerman can cooperate to lower the stop of a <a href="#home">home
signal</a> when the appropriate circumstances obtain: Please read <a href="#callon">that section</a> for details.</span></p>

<p><span>In the real subway, stops may be
&quot;hooked&quot; by being forced down by foot pressure and latched into a
&quot;clear&quot; position. This is
an emergency procedure that is employed when signals are malfunctioning. Although <b>NXSYS</b> currently provides
no means to simulate that procedure, its interlockings do make all the checks
of stop action that are often motivated by its use.</span></p>

<p><span>Stops are also involved in an automatic
behavior called &quot;cycle check.&quot; A signal will not clear, nor clear its stop, unless it can prove that
the latter has actually been in the tripping position. This verifies that the
stop is working properly, has not been &quot;hooked,&quot; and has the ability
to trip.</span></p>

<p><span>Signals set for normal traffic
movement also check off-side stops before clearing. Stops are also directly involved in <a href="#slock">switch locking.</a> Please see that section and <a href="#btob">back-to-back signals.</a></span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='callon'/><h2>3.11 (Home Signal) Call-On</h2>

<p><span>Call-on is a feature used in very
special circumstances which allows trains to pass red <a href="#home">home signals</a> by means of close cooperation between the towerman
and the motorman.</span></p>

<p><span>The idea of call-on is to allow
trains to close in on each other past home signals, just like with <a href="#ak">automatic key-by</a> on <a href="#automatic">automatic</a> and <a href="#apsig">approach
signals,</a> except that both the towerman and motorman must cooperate via
taking special explicit action: if the circumstances are acceptable for
call-on, the towerman displays a call-on indication on a home signal, and the
motorman creeps up to the signal and <b>accepts</b> the call-on by pressing a
special button that causes the <a href="#stops">train stop</a>
to be lowered, and holding it until the stop drives (comes down). He or she may then pass the signal
prepared to stop within vision. The
call-on &quot;aspect&quot; (the way it looks) of a <a href="#home">home signal</a> is red over red over yellow; there is special
yellow light at the bottom of each home signal reserved for this purpose.</span></p>

<p><span>The conditions which must obtain to permit
a call-on are easy to describe, namely, all the necessary conditions for
clearing a &quot;high signal&quot; (i.e., a normal clear signal, not a
call-on), absent the necessity of there being no train in the home signal's <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control
length</span>. That is, the route
must be <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiated</span> and completed, all switches in the correct
position, and no conflicting routes. What is more, the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track section</span> in front of the
signal, the &quot;approach section,&quot; must be <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied</span> -- a
train must be at the signal. To
&quot;clear the call-on,&quot; the towerman sets up the route as usual, but at
some time after <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiating,</span> presses the <b>call-on button</b>
for that signal. In <b>NXSYS</b>
this is done by clicking <b>control-left</b> on the signal, not when
initiating, but as a separate, second gesture after initiation: one can do this
even when the signal is already <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called</span> and the signal is red
(but a train <i>must</i> be in its approach section). When the call-on is cleared, the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK
Light</span> will blink yellow, and the call-on indication will be
displayed. At that time, the
&quot;call on is being offered,&quot; as a <a href="#fullsig">full
signal display</a> will reveal. The signal, as always, can be cancelled at any time by clicking on it.</span></p>

<p><span>The motorman <b>accepts</b> the
call-on by pressing a button actually attached to the signal -- in <b>NXSYS</b>
this can be done via a button in the <a href="#trains">train
system,</a> which see, or via the signal's <a href="#controlright">context
menu</a>, which also see. At that time, the <a href="#stops">train stop</a>
will drive (go down), as the <a href="#fullsig">full signal
display</a> will reveal, and the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK Light</span> will go to steady
yellow. The call-on will be ended
when the approach section is vacated; whether the signal is cancelled then,
too, depends on whether it is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_fleet">fleeted,</span> as in the non-call-on
case.</span></p>

<p><span>In real interlockings, the call-on
can be set by the towerman pressing the call-on button when the signal is
already <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called,</span> but red, or by holding the call-on button
while initiating (even if a high signal can be cleared), a train being
necessary in the approach section in ether case. Since one only has one &quot;hand&quot;
with <b>NXSYS</b>, the latter method is achieved in <b>NXSYS</b> by <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiating,</span>
and <i>then</i> clicking control-left on the signal.</span></p>

<p><span>In Toronto Interlockings (such as <a href="#islington">Islington</a>),
some home signals are equipped with &quot;automatic call-on.&quot; Such signals display a call on aspect
automatically if one could be displayed after a train sits for a significant
length of time in front of the signal; the stop clears automatically, without
need for the train operator to operate the call-on button.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='auxkeys'/><h2>3.12 Auxiliary Switch (Test) Keys</h2>

<p><span>Auxiliary switch keys, also known as
switch test keys, are miniature levers on all-<a href="#relays">relay</a>
interlocking panels (i.e., including NX/UR) that allow direct call for switches
when such manipulation is safe. When such calls are not safe, manipulation of
the auxiliary keys is ignored.</span></p>

<p><span>Auxiliary switch keys are not
employed in normal operation, and typically find use in the following
circumstances:</span></p>

<p><span>*  To
test the switch controllers and motors to verify that they are functional,
i.e., during maintenance, adverse weather conditions, etc., without actually
setting up routes and perhaps misdirecting trains. Obviously, in <b>NXSYS,</b>
such testing is not an issue, although experimentation becomes a possibility.</span></p>

<p><span>*  To
operate the switches under emergency conditions. Again, this is not an issue in
<b>NXSYS.</b></span></p>

<p><span>*  To
experiment with the effect of various constraints on the route-selection
mechanism of the interlocking. This
is a possibility in <b>NXSYS.</b></span></p>

<p><span>*  To
test, i.e., verify the proper function of, the interlocking. This, too, is certainly a possibility in
<b>NXSYS.</b></span></p>

<p><span>*  To
&quot;force the hand&quot; of the preferred/alternate <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_etoe">end-to-end route</span>
selection mechanism of the interlocking, i.e., to force it to choose a specific
route of many possible between two points, when that route is not the one it
would choose by default. This is
the main reason why they are supported by <b>NXSYS.</b></span></p>

<p><span>The auxiliary switch keys on real
interlocking panels are miniature levers about an inch high, with three
positions. Each is associated with
one switch or crossover, i.e., one conceptual switch <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever</span>. Unlike a <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever</span> on a
traditional interlocking machine, auxiliary switch keys are not mechanically
constrained; their manipulation is simply ignored when unsafe. When moved to the left, the switch is
called to move normal; when moved to the right, reverse. The key can be operated momentarily and
returned to center, submitting a call for the switch, or simply moved,
submitting and sustaining a call for the switch.</span></p>

<p><span>In <b>NXSYS,</b> the switch keys are
lighted buttons with two halves, <img align='right' src='auxkeys.bmp'/> the top half for the
&quot;normal&quot; call and the bottom for &quot;reverse.&quot; When not active, they are grey. <b>Click left on either half</b> issues
a call for the switch to move to the corresponding position. The half-keys light up, yellow for
reverse, green for normal, as long as the mouse button is held down.</span></p>

<p><span>To submit a momentary call for a
switch, click left on the top (normal) or reverse (bottom) half of the button,
which will flash when clicked on. To submit and sustain (&quot;stick&quot;) a call for a switch, click right
on the appropriate half. To release
the call, click left on it.  The <a href="#menu">command menu</a> item <b>Interlocking|Clear
all aux switch keys</b> can be used to release all calls at once.</span></p>

<p><span>The call for a switch, whether
generated by the switch keys or the normal mechanism, will not be honored if
the switch is locked. A call can be
submitted and stuck, but (in general) the call will not be honored when the
switch becomes unlocked (preconditioning); as a matter of fact, in this switch
the switch will <i>remain</i> locked until the call is removed.</span></p>

<p><span>When a switch successfully moves on
sustained call from the switch keys, the points of the switch, normal or
reverse as appropriate, light up in steady white (similar to a route) to
indicate that this call is in effect ---- that lit portion will be included in
routes over the switch.</span></p>

<a name="lockind"/><h3>Switch Lock Indicator Lights</h3>

<p><span>On some interlocking machines, NX/UR
and otherwise, panel lights are provided to indicate when a switch is
locked. This feature has been added
to <b>NXSYS</b> because it is quite instructive to watch, study, and understand
the locking of the various switches of the interlockings as routes are set up,
accepted, and released, and as trains move through.</span></p>

<p><span>When a switch is locked, a red light
above its <a href="#auxkeys">auxiliary key</a> (in <b>NXSYS</b>)
will light up; that is the <b>switch lock indicator light</b>. </span></p>

<p><span>As befits the semantics of switch
locking, clicks on the auxiliary key will be ignored when the switch is locked
(i.e., the lock light is lit).</span></p>

<p><span>Note that calling for a switch is not
the same as locking it: while calling for a switch to move reverse may cause it
to move reverse and cause calls for it to move normal to be ignored, that does <i>not</i>
constitute locking as far as the interlocking is concerned. The switch is only locked when a route
is set up over it, or any of the other diverse conditions discussed under <a href="#slock">switch locking</a> and elsewhere hold.</span></p>

<p><b>Click right on a
switch</b><span>
is an older <b>NXSYS</b> shortcut for auxiliary switch key operation.</span></p>

<p><span>It is extremely instructive to
initiate routes, especially long end-to-end ones, and, before completion,
experiment with the auxiliary switch keys to observe the effect on the choice
of exits offered.</span></p>

<p>Controlling
alternate end-to-end routes with switch keys<span></span></p>

<p><span>To force an <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_etoe">end-to-end route</span>
path with auxiliary switch keys, click right on the auxiliary switch keys for one or
more critical switches in the route to be set up to call them to the positions
you want. Of course, these switches
must be unlocked for this to work. Then initiate the end-to-end route. The selection circuitry, forced to respect the switches you have called,
will set up an end-to-end path through them, if possible. The white lights lit over the switch
points by the auxiliary keys will be incorporated into the route chosen.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='lockconflicts'/><h2>3.13 Locking Conflict panel indications</h2>

<p><span>An NX/UR interlocking has the ability
to tell you why it refuses to set up a route that you ask it to. Normally, this is because either an exit
you want is looking into a cleared (or <a href="#aplock">approach-locked</a>)
route in the opposite direction, or a switch that must be moved to establish
that route is locked in the wrong position for any of the reasons discussed <a href="#slock">below.</a> The former case can usually be discerned
easily by inspection. The latter
case is equally easy to discern when the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track section</span>
containing the switch is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied</span> nor part of a route -- lit up
in red or white, the reason why the switch will not move is shown plainly.</span></p>

<p><span>When a switch is locked by the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_ovlp">overlap</span>
of the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control length</span> of a signal it is neither part of a route
nor its track section <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied,</span> and it is usually not clear by
inspection why the switch is locked. In this case, when you try to <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiate</span> a route that but
for a switch being locked in this way would extend out over that switch, the
interlocking will flash the points of the switch
(on the interlocking panel) in white and the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span> of the
signal that is locking it in unison.  You then can <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_cancel">cancel</span> the
signal so identified, or the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiation,</span> for that matter, or
ignore this information and set up some route which is not locked out.</span></p>

<p><span>To see this in action at <a href="#progman">Progman St.,</a> route <a href="#apsig">approach signal</a> 2 by clicking on it, and
then try to initiate at signal 8 by clicking on it, in turn. The GK light for signal 2 and the
normal-position points of switch 9 will begin flashing, signifying that signal
2 is locking switch 9 normal, and that is why no exit at signal 30 via 9
reverse is being offered. Cancelling 2 at this point (by clicking on it) stops the flashing and
offers the additional exit. Selecting the exit at 10 (or elsewhere), or cancelling the initiation at
8, also stops the flashing conflict indication.</span></p>

<p><span>It is possible for a switch to flash
in this way without any GK flashing. This occurs when the a signal is no longer <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called,</span> but
its <a href="#aplock">approach locking</a> has not yet
timed out and is locking the switch. Obviously, you cannot cancel the signal -- you must either give up, wait
for the approach locking to time out, or cancel all approach locking via the
command menu.</span></p>

<p><span>There is also one case where a switch
and the signal locking it will continue to flash even though an exit has been
chosen. This is the case of <a href="#fpoverlap">facing point overlap,</a> which see.<br
clear=all style='page-break-before:always'>
</span></p><a name='hairy'/><h2>3.14 Advanced Locking Scenarios</h2>

<p><span>(For the intensely curious and dedicated only - beginners may ignore this.)</span></p>

<p><span>In order to maintain all the rules
already stated, switches and signals have to interlock in very subtle ways that
are not at all obvious upon first inspection. This section discusses several
situations that occur in real interlockings, and are dealt with by the 733-33
standard. They all occur at <a href="#islington">Islington Interlocking,</a> but not at <a href="#progman">Progman St.</a> The following diagram will be referred
to in the rest of this section:</span></p>

<p><span><img align='center' src='crotch.bmp'/></span></p>

<p><span>The above is known as a &quot;crotch
layout&quot;, and is exceedingly common in all railroads, the New York subways
not excepted. As can be seen, it is
the termination of a third mainline or siding track to running tracks. Although the above example is fully
signalled for all possible moves, often signals 2 and 10 might be omitted, or
be <a href="#marker">marker signals.</a> The three switches are controlled as one
crossover (7) and one singleton switch (5). There is an <a href="#apsig">approach signal</a> on the center track (12), and, as can be seen,
its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control line</span> extends past the <a href="#home">home-signal</a>-protected
area out to track sections 123 and 223.</span></p>

<p><span>The first issue is a railroading practice
concerning the effect of switch 5 on routes over switch 7 reverse. If a route is to be set up from signal 4
to signal 8, or vice versa, which would be over 7 reverse, the position of
switch 5 is theoretically of no consequence, as it is not involved. However, good railroading practice
demands that in the case such a route, 5 be set normal. It can be seen that a northbound train
on track 1 has less chance of causing damage, broadsiding the train on 7
reverse, if 5 is ensured normal. The interlocking must, therefore, ensure that 5 is capable of being set
normal, and moving it so, when any route over 7 reverse is set up. Any situation which locks 5 reverse (but
somehow does not lock 7) will lock out a move over 7 reverse. This is referred to as the &quot;crotch
layout&quot; case in the literature.</span></p>

<p><span>The second issue is called <b>conditional
crosslock</b>, and involves signal 12, an approach signal, and its interaction
with the state of switches 7 and 5. It can be seen that if 7 is normal, 12 cannot clear unless 5 is reverse
-- with 7 normal, 5 is a trailing-point switch in the control length of
12. Either one of 7 and 5 must be
reverse for 12 to be able to clear. Now, as described above, when a route is laid out from 8 to 2 or 4,
switches 5 and 7 must both be moved such that only one is ultimately in the
reverse position.</span></p>

<p><span>In detail, assuming no route is set
up over 5 and 7, clearing signal 12 must force either 5 reverse and 7 normal or
7 reverse and 5 normal. Assume no
route over 5 and 7, but 5 reversed, and 12 is clear (over 5 reverse to
123). Assume we then wish to set up
a route from 8 to 4 over 7 reverse in this condition. As stated above, 5 must be normal before
a route over 7 reverse can clear. But if 5 is set normal before 7 is fully moved, the control length of 12
will see switch 5 set against it, and will turn red (&quot;be kicked
off&quot;), perhaps in the face of an oncoming train, which is
impermissible. Thus, the
interlocking, in this case, must move switch 7 <i>first,</i> then switch 5, so
that at no time is signal 12 kicked off. This is done automatically by the interlocking; it is not something the
towerman must concern him or herself with. Switches 27 and 29 at <a href="#islington">Islington</a>
have this relationship, and this behavior can be observed. When there is an exit at 44, 27 and 29
can be moved by hand (right click), but only one at a time and never through
the state where both are normal.</span></p>

<p><span>Note that it must be permissible for
7 and 5 to be reverse simultaneously with 12 clear (but, presumably 8 not (yet)
clear). Were this not so, it would
be impossible to call and clear 8 to an exit at 4 with 12 already clear over 5
reverse and 7 normal.</span></p>

<p><span><a name="fpoverlap"/>The third issue is called <b>facing
point overlap.</b> Again, this
involves signal 12 above, and manipulating switches 5 and 7 in a situation
where 12 is already clear under such constraints that the signal is not kicked
off as a side-effect. Consider
switch 5 reverse, 7 normal, approach signal 12 clear over 5 reverse into
section 125 and 123. As can be seen from the diagram, its control length
extends out through 123. Suppose,
in this situation, that section 223 were <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_occ">occupied,</span> and an attempt
were made, even under all the constraints above, to move switch 7 reverse,
perhaps to clear up a <a href="#callon">call-on</a> on 8
into the train at 223. Even though the route is valid and permissible, a
side-effect would be to &quot;throw the train&quot; into the control length of
12, which will kick it off as soon as the switch is moved, which is
impermissible.</span></p>

<p><span>In this case, switch 7 is said to be
&quot;locked by the overlap of 12&quot;. A properly-designed interlocking will not permit 7 to be reversed in
this case. However, a very special
allowance is made in this case. The
route from 8 to 4 can indeed be set up, but the switch will not move until the
train leaves 223, at which point the switches will move and the route will
complete its setup automatically. This is called <b>preconditioning</b> the switch, i.e., setting up a
situation where a later event causes a manipulation attempted earlier to take
effect, and the only case where it is permitted. The switch and signal 12 will flash on
the interlocking panel (see <a href="#lockconflicts">Locking Conflicts</a>)
with entrance and <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_exlt">exit lights</span> showing in this state.</span></p>

<p><span>In all of the above scenarios,
&quot;signal 12 is clear&quot; is shorthand for &quot;signal 12 is clear, or
its <a href="#aplock">approach locking</a> has not
reset.&quot; Please see <a href="#aplock">&quot;Approach Locking&quot;</a> for a
discussion of this.</span></p>

<p><span>All of these situations can and do
occur simultaneously. They all
occur simultaneously over switches 27 and 29 at <a href="#islington">Islington,</a>
where the complexity is further enhanced by the interaction of these three
situations with <a href="#stationtime">station time (ST) signals.</a>.<br
clear=all style='page-break-before:always'>
</span></p><a name='btob'/><h2>3.15 Back-to-back signals</h2>

<p><span>Two signals in opposite directions at
the same location (the same <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_IJ">insulated joint</span>) present many
interesting issues. Consider the
following two signals and associated switches and track: <img align='left' src='btob.bmp'/> Note
that each of the signals 2 and 4, which must be <a href="#home">home
signals,</a> has a <a href="#stops">stop.</a> Every signal (except some <a href="#dwarf">dwarves</a> and <a href="#marker">markers</a>) has a stop, and is prepared to stop a train. When
two signals are at the same location, their stops are at the same location, but
on opposite sides of the track. A
stop in the wrong direction in the tripping position can indeed trip a train,
but it is not designed to. Thus, no
matter what other rationale can be brought to bear, it is not meaningful for
two stops at the same location to disagree, i.e., one be tripping and one be
clear. Thus, the two stops at 2 and
4 are controlled (and sometimes even constructed) as one mechanism. This is the case in <b>NXSYS.</b></span></p>

<p><span>This raises issues about how the two
signals interact to clear the stop. Clearly, if either one is clear, the stop must drive (go down), and when
a train passes the pair of signals in either direction, the stop must come up
behind the train.</span></p>

<p><span>An additional complexity is
introduced by the fact that stops <a href="#slock">lock
switches.</a> That is, a
switch cannot be moved until all stops protecting it are in the tripping
position. Thus, for switch 5 to
move, 2's stop must be tripping, which, of course, is no surprise, as 2 must
not be called. But since 2's stop
is 4's stop, 4's stop must be at tripping, and thus, 4 must be at stop. Therefore, unless 4 is at stop, 5 cannot
be moved, which is not obvious. If
4 were clear, there is little sense in clearing 2, as no trains can be between
two signals at the same point. But
clearing a route with an <i>exit</i> at 2, i.e., entering at the left of the
diagram, would be impossible if 4, and thus 2's stop, were clear. Thus, interlockings (including <b>NXSYS'</b>)
require a home signal in this case to be red unless there is a route lined up <i>toward
it.</i></span></p>

<p><span>There is an exception to this case:
if a train moving southward passes completely past 2/4, and wants to reverse,
it would be impossible to clear 4 under these conditions. Therefore, the rule above is
short-circuited, as it were, if there is a train in 201 -- occupancy of 201, or
north routing through 201, permits 4 to clear.</span></p>

<p><span>Note that all signals check their
stops, and do not clear unless and until their stops are clear; the shared stop
being in the tripping position forces both its signals red.</span></p>

<p><span>This situation becomes even more
complex when the back-to-back signals are of different types, e.g., one is an <a href="#automatic">automatic</a> and the other is a <a href="#home">home signal</a> or <a href="#marker">marker signal.</a> In this case, the <a href="#ak">automatic-key-by</a> feature of the automatic signal would totally
defeat the stop of the home signal unless great ingenuity is applied to the
management of the shared stop. It
turns out that the standards used by NYCTA consider the idea of a home (or
marker) signal's stop being driven down by another signal's AK, no matter what
the rationale, less acceptable than decoupling the two stops, and that is the
policy currently in force at marker
30 and automatic A2-714 at <a href="#progman">Progman St.</a>
(for example) and elsewhere in the <b>NXSYS</b> interlockings.</span></p>

<p><span>The practice of operating the two
stops of back-to-back signals from the same motor was once common practice on
the BMT, but is no longer employed.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='scenarios'/><h2>4.0 Interlocking Scenarios</h2>

<p><b>NXSYS</b><span> comes supplied
with two sample interlockings, <a href="#progman">Progman St.,</a>
a four-track setup with three double crossovers, not unlike Brighton Beach or
57th St. (Broadway/7th Avenue) (those old enough to remember the Brighton
Express will recognize and appreciate the symmetry) with a single crossover
added, and <a href="#islington">Islington,</a> a two-track
setup with a double crossover and a siding, the latter not unlike Lefferts Ave.
on the IND Fulton St. line or Court Square on the IND Crosstown.</span></p>

<p><span>Islington is the more recent addition
to <b>NXSYS</b>, and was designed from actual Toronto signal charts. Progman St., on the other hand, contains
many simplifying assumptions, such as the lack of <a href="#stationtime">station time</a> signals and <a href="#fpoverlap">facing
point overlap</a>. Progman
St. is much better for learning the rudiments of NX/UR operation, while Islington
goes full bore to all the complexities of a live scenario. In order to really
operate Islington, it is necessary to comprehend even the <a href="#hairy">Advanced Locking Scenarios</a> described in this helpfile; for
Progman St., it is not.</span></p>

<p>Designing your own scenarios is difficult.<br clear=all style='page-break-before:always'>
</span></p>
<a name='progman'</a>
<h3>4.1 Progman St. Interlocking</h3>

<p><span>The fictitious <b>Progman St.</b> is
an interlocking very much like several 4-track terminals on the New York system
where the station &quot;pockets&quot; on the center (express) tracks are used
for holding and reversing trains coming from either the express or local
(outside) tracks. 57th St. (Broadway/7th Avenue BMT), and Brighton Beach
(Brighton Beach line, BMT) are typical of such. Progman St. is a little more
and a little less, to introduce variety for didactic purposes. The equivalent of switch 21 appears at
neither of the named interlockings, and is there only to add to the fun with
the availability of multiple routes between signals 20 and 32 and 34.</span></p>

<p><span>The interlocking files for Progman
St. interlocking are:</span></p>

<p><span>            <b>     progman.trk</b>        Relay-language
source-code for the interlocking<br/> <b>                 prgman32.tko</b>    </span>Compiled interlocking definition. <span style='color:#0A0;font-weight:bold'>Not used on the Mac&#x2122;; use progman.trk.</span></p>

<p><span>Please refer to the <b>NXSYS</b>
display of Progman St. interlocking for the following discussion. It is conventional, when explaining a
given interlocking, to present a track map with all <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control lines</span>
and <a href="#timesig">time signal</a> timing sections
shown -- it is hard to operate or understand the interlocking without this
knowledge. However, such a map is
hard to create, and would be too big for the present helpfile format, so,
regretfully, this discussion will have to do. It would be necessary even if a map were
present.</span></p>

<p><span>Progman St., while usable as such a
terminal, is signalled in a style that indicates such use is envisioned in rare
circumstances only. This is evident
in the fact that signal 14 is a <a href="#dwarf">dwarf signal</a>
(used for rare moves), not a full <a href="#home">home signal,</a>
and the fact that there is no northbound (to the right, that is) signal
opposite 24, controlling moves into the pocket on A3 track. This is deliberate, to produce a more
interesting interlocking. The most
recent NYCTA interlockings I have seen are very heavily signalled in all
directions.</span></p>

<p><span>Progman St. also supports
&quot;reverse&quot; moves into normal running track -- trains entering on the
right from A1, A3, or A4 tracks can exit to the left on any of the four tracks,
and trains entering from the left on any track can exit to the right on any
track -- there are signals provided to govern all these moves. Yet, Progman St. only supports these moves
&quot;lightly&quot; -- they are very lightly signalled, and entrance at 32 and
34 is expected to be rare, as these are dwarf signals (click right on them to
see).</span></p>

<p><span>Progman St. supports <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_etoe">end-to-end</span>
routes (or &quot;through-routing&quot;, see <a href="#nxo">Basic
NX Operation</a>) from any entrance to any possible exit. Moves between 4
and 20 are the most expansive.</span></p>

<p><span>An interesting feature of Progman
St. is the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_ovlp">overlap</span> of the <a href="#home">home
signal</a> <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control lines</span>. For instance, If 8 is the entrance of a
route to 10, and 26 begins a route to 24, switch 15 must be normal, or the
routes would conflict in the overlaps of the control lengths of 24 and 8. If this setup is attempted with 15
reverse, you will actually see 15 move normal. To see this, route 8 to 26, cancel 10
after setup, then route 26 to 24. Cancel 8 in this condition and attempt to initiate at 14, and you will
see switch 17 flash and signal 26 complain by flashing, indicating a <a href="#lockconflicts">locking conflict</a> with the
overlap of 26. Similarly, if a
northbound train (as per <a href="#routl">route-locking</a>)
sits facing signal 28, but 32/34's <a href="#aplock">approach
locking</a> has expired, lining a route from 26 to 24 will require and
force 15 reverse before 26 clears; these situations are categorically known as <b>facing-point
push.</b></span></p>

<p><span>Progman St. also contains three <a href="#gt">Grade Time (GT)</a> signals, the northbound <a href="#automatic">automatics</a> A2-725, A4-720, and
A4-727; that is why they are red at startup. Please see the discussion of <a href="#timesig">time signals</a> for a description of this
feature.</span></p>

<p><b><span>Progman St. Safety Warning!!!</span></b><span></span></p>

<p><span>Because of its didactic intent,
safety at Progman St. has been compromised in one serious way which could not
occur at any real interlocking --- it allows &quot;wrong-direction&quot; trains
to enter the tracks on the lower
left and upper right, without any protection against trains coming in in the
correct direction from the &quot;great void&quot; outside of the screen. In a real interlocking (e.g., 57th St)
such moves would be outright forbidden (&quot;No moves to track 2&quot;), or
traffic control coordinated with a remote interlocking and/or
&quot;holdout&quot; signalling would be employed. Any of these techniques would either
extend the panel off the screen in both directions, mysteriously halting
simulated trains off the screen and totally befuddling beginners, or otherwise
reduce the didactic value of Progman St.</span></p>

<p><span>Furthermore, the <a href="#dwarf">dwarf signals</a> are unsafe against impermissible wrong-direction
moves, as they have no <a href="#stops">stops.</a> This is as per reality in older
interlockings; as discussed under that heading, newer interlockings do not
employ dwarf signals on revenue trackage for that reason.<br clear=all
style='page-break-before:always'>
</p></span>
<a name='islington'/>
<h3>4.2 Islington Interlocking (Toronto)</h3>

<p><b>NXSYS</b><span> now supplies a
very complete and accurate implementation of Islington Interlocking on
Toronto's Bloor-Danforth line. The
signalling principles and panel operation are identical to those in New York
City, although the signal aspects for <a href="#timesig">time
signals</a> are a little different.</span></p>

<p><span>This interlocking was chosen because
even though it is smaller than <a href="#progman">Progman St.</a>,
and involves fewer tracks, it involves a fair number of complexities not
present there.</span></p>

<p><span>The interlocking files for Islington
interlocking are:</span></p>

<p><span>            <b>     islingtn.trk</b>            Relay-language
source-code for the interlocking<br/> <b>islingtn.tko</b>&nbsp;&nbsp;Compiled interlocking definition. <span style='color:#0A0;font-weight:bold'>Not used on the Mac&#x2122;; use islingtn.trk.</span></p>
</span></p>

<p><span>We will present here the very minor
differences between New York and Toronto conventions, and critical facts
necessary for anyone operating this interlocking. Please refer to the <b>NXSYS</b>
display of Islington interlocking for this discussion.</span></p>

<p><b>Track and Signal
Numbering and designation</b><span></span></p>

<p><span>Tracks are called Eastbound and
Westbound. At Islington, eastbound is to the right, westbound is to the
left. Toronto numbers its signals
with odd <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_sno">station numbers</span> for the
eastbound track, and even for the westbound. If a signal is in the reverse direction
or on some track than the main tracks of a 2-track line, it is labelled with an
&quot;A&quot;, e.g., &quot;BA-122&quot; instead of &quot;B-122&quot; (that
would be B1-122 and B3-122 in New York). Switch <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">levers</span> are odd and signals even, as in New
York.   <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">Track sections</span>
and their associated <a href="#relays">relays</a> at
interlockings, like signals, are numbered by the interlocking number of the
signal controlling them (e.g., 10T), or with an &quot;A&quot; (42AT) for
&quot;approach&quot; if there is no interlocked signal controlling it; in New
York, all track sections are numbered by <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_sno">station number.</span></span></p>

<p><b><span>General use and
purpose of the interlocking; permissible routes</span></b><span></span></p>

<p><span>Like <a href="#progman">Progman
St.,</a> Islington is a &quot;sometimes terminal.&quot; The region at the left, delimited by
signals 6, 8, 10 and 12, is a station platform. Trains can either pass right through on
the mainline tracks, or the station can be used fully or partially as a
terminal, in which trains coming westbound, from the east, can turn around in
the station and depart to the east. That is, trains entering at 48 can exit at
10 or 12, then enter at 10 or 12 and exit at 50. The center track can be used for
temporarily holding trains during such maneuvers, such as holding a second
train to destined for 10 while that pocket is occupied, as a third train goes
right by to the pocket at 12.  Note
that the third track is passable in either direction.</span></p>

<p><span>The interlocking does not permit
trains to exit it eastbound on the westbound track (at 48). There is no exit at 48. There is no exit at 18; all eastbound
traffic must leave the westbound track at 12 or 16. In the other direction, westbound trains
certainly can enter the eastbound track, to terminate at the station, but may
not go beyond signal 6, which is a <a href="#marker">marker
signal.</a>. (In real life,
there is a signal 4, eastbound, to the west of 6 to further protect this move,
but we do not implement it, or 52 to the east of 48, because of screen space
limitations.) Note that reverse-direction (westbound) traffic from 50 over the
eastbound track) is permitted. Note also that there are several routes, e.g.,
from 48 to 10, for which there are three alternatives (in this case,
48-20-18-16-10, 48-44-30-16-10, 48-44-30-14-10). The interlocking uses a
&quot;preferencing&quot; algorithm when more than one is available.</span></p>

<p><span>The lower heads home signals 12 and
14 display the opposite aspect from what would be expected in New York; in
either case, green clears a movement to the track in the &quot;normal&quot;
direction, a move over switch 13 in either case, and yellow clears the other
move, i.e., into the &quot;reverse direction&quot; track.</span></p>

<p><b><span>Some <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">Control
Lines</span></span></b><span></span></p>

<p><span><span style='font-weight:bold;color:#0A0'>There is a signal control-line plan for Islington Interlocking, Islington.pdf, in the Islington Interlocking folder (courtesy Dave Barraza). Please refer to it in the following discussion</span>. It is <i>essential</i> to know the extents
of these control lines to understand the various <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_ovlp">overlaps,</span>
crosslocks, and conflicts implicit in this interlocking.</span></p>

<p><span>Eastbound, 2's control line extends
to IJ's 127/128 on all three tracks. 10 and 12's control line extends to 44 on the center track and 42 on the
eastbound track; as stated above, they permit no moves (ultimately) to the
westbound track. 26 and 28's control lines extend out, whether via the center
track or not, past 50 to encompass its approach track section, as does 44's.</span></p>

<p><span>Westbound, 48's control line is quite
complicated. When going over 45
normal down the eastbound track, it is an <a href="#stationtime">ST</a>
signal whose &quot;solid&quot; control length extends to 16/28, and whose
&quot;dotted&quot; control length extends over both station platforms (via
switch 15) to the end, i.e., IJ 115/116. When going over 45 reverse down the center track, its control length,
shared with 50, goes to 10/12 - note that 48's control length to the station
behaves differently depending upon whether the middle track is employed. 50
over 49 normal extends all the way to the end (115/116). 20 is also ST, solid
portion to 26/28, dotted to the the end. The exact same description befits 18. 30's control length extends from itself
to the end. 16 and 14's extend one
track section <i>beyond</i> the left-hand (west) end. The <a href="#automatic">automatic
signals</a> at 121 on both tracks (B-122 and BA-122) are <a href="#gt">GT signals,</a> timed from 14/16, control lines
also going one track section beyond the end.</span></p>

<p><b><span>Home-style <u
style='text-underline:double'>approach signals</u>, as it were</span></b><span></span></p>

<p><span>Toronto makes heavy use of <a href="#apsig">approach signals</a> that look and act as <a href="#home">home signals,</a> i.e., have two heads, no <a href="#ak">automatic key-by,</a> require <a href="#callon">call-on</a> to pass, etc. They are not unheard of in New York (and
on unresignalled IRT, all approach signals are really one-headed home signals),
but are more heavily used in Toronto. Signals 2, 8, and 20 at Islington fit this description. They are to be considered home and
approach signals simultaneously, sort of &quot;absolute approach signals.&quot;</span></p>

<p><b><span>Auto-<a href="#callon">call-on</a> <a href="#home">home
signals</a></span></b><span></span></p>

<p><span>Toronto provides a feature whereby
some <a href="#home">home signals</a> act somewhat like <a href="#automatic">automatic</a> signals when red, if the
only reason they are red is because of a train in their <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control length,</span>
i.e., not that they are not <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called.</span> These signals, when in that state, and
approached sufficiently slowly, typically 5 mph, display a <a href="#callon">call-on</a> automatically, as it were. The motorman need not manually key-by
(see <a href="#callon">call-on</a>), and no tower action
is required; the towerman will see
the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light</span> flash as
the call-on is offered and accepted. Signals 12, 10, and 18 at Islington have this feature.</span></p>

<p><b>GT signals</b><span></span></p>

<p><span>While the purpose and operation of <a href="#gt">GT signals</a> in Toronto is the same as in New
York, the aspects are slightly different. The two GT signals at Islington (the two <a href="#automatic">automatic
signals</a> at the east end of the station) are &quot;one
shot&quot;. In New York, they would
have a <a href="#lunar">lunar white</a> to indicate
this. But in Toronto, the signals <i>before</i>
them (in this case, 14 and 16) have the lunar white aspect, which indicates
that the <i>next</i> signal is in the grade-timing state, i.e., will clear if <i>it</i>
is approached sufficiently slowly (similar to the two-shot &quot;S&quot; in New
York, but it is one-shot).</span></p>

<p><b>ST signals</b><span></span></p>

<p><span>Again, the purpose and operation of <a href="#stationtime">ST signals</a> is the same as in New
York. Unlike as in New York, there
are no special ST aspects (e.g., the &quot;20&quot;, see <a href="#stationtime">ST Signals.</a>)</span></p>

<p><span>Islington signals 48 (over 45 normal
only), 20, and 18 form a chain of ST signals allowing closing-on signal
16. Each of them has the
&quot;solid portion&quot; of their <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control length</span> extending from
itself to signal 16, and a &quot;dotted portion&quot; from 16 on through the
west end of the station. Thus, if
signal 12 is cleared over 13 reverse for an eastbound move from the westbound
pocket via 26 to 50, all of 48, 20, and 18 can be cleared in &quot;restricted
form&quot; (see <a href="#intst">Interlocked ST Signals</a>
and trains coming in from the east can close in, clearing 48, 20, and 18 in
sequence as they approach 16, which is red, protecting the reversed 13.</span></p>

<p><span>Trains created via the <b>NXSYS</b> <a href="#trains">train system</a> set loose on the westbound
track will actually act in this way, slowing down before these ST signals and
clearing them.</span></p>

<p><b>Overlaps and
Crosslocks</b><span></span></p>

<p><span>The <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_ovlp">overlaps</span> of the
signals at Islington, especially 48, 50, and 30, westbound, impose very complex
conditions on switches 27 and 29 in particular, and all of the issues described
under <a href="#hairy">Advanced Locking Scenarios</a> must
be studied to understand all the situations in which <a href="#lockconflicts">locking conflicts</a> will be indicated by flashing lights
as Islington.<br clear=all style='page-break-before:always'>
</span></p>

<a name='design'/>

<h3>4.3 Designing your own scenarios --- NOT</h3>



<p><span>Designing your own <b>NXSYS</b>
scenarios, unfortunately, is not very easy now, nor may it ever be. As <b>NXSYS</b> is an interlocking
simulator, not an interlocking implementation, designing and creating the track
layout consists not only of designing and expressing the track and signal
layout, but all the <a href="#relays">relay circuitry</a>
which implements the interlocking. The latter is the lion's share of the work (and the fun), but requires
complete understanding of the New York prototype circuits.  It is probably possible to learn a
lot of this subject matter by watching the relays in action with <b>NXSYS.</b> Rather than an accident, a bug, or a poor
design choice, this is the reason <b>NXSYS</b> came to be in the first place.</span></p>

<p><span>This paradigm, does, however, offer
the advantage that you have the &quot;source code&quot; for the two supplied
interlockings; in the time-honored tradition of computer programmers, you can modify
the supplied interlockings in layout, behavior, or implementation, without
restriction, if you wish to experiment or learn without crashing any real
trains. You do not need the source
code for <b>NXSYS</b> to do this, or to know any programming language, at
all. The <i>real</i> pleasure in <b>NXSYS</b>
is not so much playing with an operative interlocking, but interactively
designing and debugging it in the manner of a computer program.</span></p>

<p><span>If you have the required expertise in
signal engineering, <b>NXSYS</b> is an ideal tool to create, experiment with,
and debug relay circuit designs. The paradigm for setting up the track layout can be inferred from the
supplied interlocking sources and the supplied document <b>rlylang.txt,</b>
although, certainly, a graphic editor would be preferable.<br clear=all
style='page-break-before:always'>
</span></p><a name='relays'/><h2>5.0 Relays and Relay Logic</h2>

<p><span>You can safely ignore this
section. But if you wish to
understand the internal workings of NX interlockings, debug <b>NXSYS,</b> or
you are so idle and/or well off that you wish to attempt to design your own interlockings,
read on.</span></p>

<p><span>A <b>relay</b> is an
electromechanical switch (not a &quot;switch&quot; as in a piece of track), a
set of switches operated together by an electromagnet. Electricity flowing through the switches
can be used to control any electrical apparatus, or, more relays. Relays are neurons, and form &quot;logic
networks&quot; implementing complex functionality. Although relays as logic elements have
largely been obsoleted by computer technology, the earliest electrical
computers, including phone switches, were built of relays, and railroad
signalling and interlocking is still implemented in relays today. This is because their modes of failure,
unlike those of software, can be fully enumerated and designed around.</span></p>

<p><span>Relays sport two types of switches,
or &quot;contacts,&quot; those that allow electricity to flow through them when
the &quot;coil&quot; (electromagnet) is energized and not when not, and those
that allow current to flow when the coil is <i>not</i> energized, and not when
it <i>is.</i> In railroad
terminology, the former are called <b>front contacts,</b> and the latter <b>back
contacts.</b> A contact is said to
be <b>closed</b> when electricity can flow through it, and <b>open</b> when
not. A typical railroad signalling
relay might have a dozen contacts total, some front, some back. Railroad signalling relays are of extremely
high quality, rugged, and quite expensive.</span></p>

<p><b>NXSYS</b><span> interlockings are
implemented as simulated relays; the actual names of the relays and the way the
contacts are interconnected are defined in the <b>.trk</b> file; the <b>Relay Compiler</b> writes
machine-language computer programs that do the same thing as the relays, and
puts them in the <b>.tko</b> file. All of the logic of the interlocking described in <a href="#ifeat">Chapter 3</a> of this documentation are implemented not in C or
C++, but in simulated relays, using traditional New York circuit designs.</span></p>

<p><b>NXSYS,</b><span> when running the
&quot;interpreted&quot; file (<b>.trk</b>), allows you to actually see the
circuits for any and all relays it is managing and simulating. You can display the circuits on the
screen, several at a time, or create a set of hardcopy circuit drawings
suitable for study and analysis. The relays and their logic circuits are displayed in traditional New
York Subway relay logic notation, which is extremely clear and intuitive: <img align='left' src='relay.bmp'/> the coil of a relay is a little box sitting on a wire, and a contact
is a little triangle and a dot -- triangles &quot;balancing&quot; above the
wire are front contacts, and triangles sitting under it are back contacts. Each coil or contact is labelled with
the name of the relay of which it is part.</span></p>

<p><span>A relay is said to have a <b>state</b>
at any time: it is said to be <b>picked</b>
or <b>up</b> if the coil is energized (and front contacts closed and back
contacts open), or <b>dropped</b> or <b>down</b> if the coil is not energized,
front contacts open, and back contacts closed.</span></p>

<p><span>The &quot;definition of&quot; or
&quot;circuit for&quot; a relay is the wiring diagram for its coil, the network
of contacts of other relays (or even that relay) which control when it is up
and when it is down. To see the
definition of any relay, select </span><b>Relays|Show
Circuit</b><span>
and type the name of the relay you want to see. The definition will be displayed. The current state of the relay (picked
or dropped) will be displayed with the coil, and the state of each contact will
be displayed as open or closed -- a white triangle is open, black is
closed. If relay and contact states
change while you are looking at the drawing, it will be updated as you
watch. If you click on any contact,
the circuit for that relay, reflecting current state, will be displayed as
well. When the page fills up, it will
be cleared, or you can clear it from its local menu.<br/><img align='left' src='relay.bmp'/></span></p>

<p><span>What relays do you want to see? A typical relay name is a number
representing a switch, signal, or track section, and a <b>nomenclature</b>
indicating function. For instance, <b>24R</b>
is the &quot;Route Check&quot; (<span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called</span>) relay for Signal 24,
which is picked when it is called and dropped when not. Here are some nomenclatures for
exploration:</span></p>

<p><b>Signals</b><span></span></p>

<p><b>H </b><span>       &quot;Home&quot;
relay - clears the signal and stop.</span></p>

<p><b>V </b><span>       The stop itself.</span></p>

<p><b>R </b><span>       &quot;Route
check&quot; relay -- the virtual signal <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever.</span></span></p>

<p><b>PBS</b> <span> &quot;Push
Button Stick&quot; -- initiation. When <a href="#intst">interlocked station-time signals</a>
that permit their clearing in spite of a <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_trps">trailing-point switch</span>
are involved, this function is split into APBS and BPBS depending on whether
the initiation exploits this feature or not. Please see that section.</span></p>

<p><b>XS</b><span>     &quot;Exit
Stick&quot;</span></p>

<p><b>AS</b><span>     &quot;Approach
stick&quot; -- picked when approach locking is satisfied.</span></p>

<p><span></span></p>

<p><b>Switches</b><span></span></p>

<p><b>NLP</b><span>  &quot;Normal
lever repeater&quot;</span></p>

<p><b>ANN, BNN, ANS, BNS, RN, RS</b><span>   &quot;Switch selection&quot; --
potential intention to move a part of a switch a given way. The &quot;tendrils&quot; at the heart of
NX magic.</span></p>

<p><b>NWC</b><span>                    &quot;Normal
sWitch Correspondence&quot;</span></p>

<p><b>LS</b><span>     Lock Stick -- picked when switch is safe to move.</span></p>

<p><span></span></p>

<p><b>Track</b><span></span></p>

<p><b>T</b><span>         Track relay - picked when track is clear (no train).</span></p>

<p><b>NS, SS</b><span>               North,
South <a href="#routl">route locking</a> relays, picked
when <i>no</i> route in that direction is set, i.e., attest to the absence of
such a route.</span></p>

<p><span></span></p>

<p><span>There are many others, and they are left as a tantalizing exercise
for the reader. This information
can be quite interesting -- you can look into a functioning brain with it. For instance, if clicking on a signal
does not cause it to <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiate,</span> you might want to look at the <b>PBS</b>
circuit for that signal and see which contacts are closed and which are open,
i.e., where the path is broken. One
can then track down those relays, by merely clicking on the contact, until the
situation is figured out. By choosing
a good selection of relays to watch at once, and observing contacts as a train
goes through or a route is set up and cancelled, one can actually watch the
interlocking think.</span></p>

<p><span>The circuit-drawing system only works when an
&quot;interpreted&quot; interlocking is loaded, i.e., a <b>.trk</b> file, for
that is the only time that code is present. Nevertheless, there are still are relays
in a &quot;compiled&quot; (<b>.tko</b>) interlocking, and their state (compiled
or intepreted) may be interrogated with </span><b>Relays|Query.</b><span> This command will
prompt for a relay name and show its state, and, if you wish, its
&quot;dependents,&quot; that is, the list of all relays who depend upon this
relay in their own circuits (its &quot;outputs&quot;, if you will).</span></p>

<p><span>The relay graphics window can be resized: making it narrower makes
the symbols smaller, too -- there are a fixed number of contacts on each line
-- but doing so also allows more to fit in a given vertical space.</span></p>

<p>One can print, on a printer, all the circuits for all the relays in
the interlocking from the <b>File|Print
Logic</b><span>
menu item, as a set of schematic diagrams. While this is easy to do in an interpreted interlocking, in a compiled
interlocking the source (</span><b>.trk</b><span>) must be referred
to to retrieve the definitions while the interlocking itself is queried for the
contact states: <b>File|Print Logic
File</b> does just that, and dialogs you for the source file name. It is best to restore the interlocking
to &quot;canonical state&quot;, i.e., all track sections clear, all signals
cancelled, all switches normal (use </span><b>Interlocking|All
the above</b><span> if you wish) before printing, so that contact states will reflect
the &quot;normal&quot; state of these relays, which is defined in this way, and
is the original intent and traditional usage of the black/white triangle
distinction.</span></p>

<p><span>Some relays will appear to have &quot;missing circuits&quot;, or
wires that go no where, or are disconnected. Most of these relays are &quot;Quisling
relays&quot;, operated directly by the user via the mouse, such as by clicking
on a signal or track section, providing the &quot;inputs&quot; to the relay
system. Bear in mind, too, that
other relays are observed directly by the user interface (such as <b>H, T, V</b>)
to control the states of the symbols it displays.</span></p>

<a name="tracewindow"/><h3>Relay Trace Window</h3>

<p><span>One can trace relay activity, in a compiled or interpreted
interlocking, with the <b>Relay Trace window</b>, which is activated from </span><b>Relays|Trace.</b><span> Each time a relay is picked or dropped its name and which (pick or drop)
is reported to the trace window. The trace window, of course, makes the interlocking substantially slower
-- hiding it restores interlocking speed.</span></p>

<p><span> Enable <b>More</b> on
the trace window's menu (or use the toolbar, selecting the &quot;moron&quot; to
turn &quot;More&quot; on) to cause the trace (and the interlocking simulation)
to pause at the end of each screenful. Typing space or pressing the <b>M</b> tool allows the trace and
simulation to resume. But typing <b>Q</b>
or pressing the &quot;Stop&quot; tool aborts the simulation, the only way to
get out of a loop in an logic-bug-induced emergency. At that point, you will be offered
exiting <b>NXSYS</b>, reloading the interlocking, or return to top level with
no interlocking loaded.</span></p>

<p><span>The trace window can be cleared, a frequent need, from its own menu,
or the first tool on its toolbar.<br clear=all style='page-break-before:always'>
</span></p><a name='snew'/><h2>6.0 What's new in this version</h2>

<p><span>All documentation is up to date. <span style='color:#0A0;font-weight:bold'>The Mac version is new, how's that?</span>.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

<a name='credits'/><h2>7.0 Credits and Conditions of Use</h2>

<p><b>NXSYS</b> was conceived, designed, and written by <a href="#author">Bernard S. Greenberg, of Boston, Mass.,
USA,</a> on his own time, not using any non-redistributable copyrighted or owned components, or developed on anyone
else's paid time. This software is offered as-is. Although this software is thought to be relatively bug-free, bug
reports and suggestions will be fielded, but no response in any given time promised. No representations, warranties,
guarantees, or claims about correctness, operability or suitability of this software and/or documentation for any
purpose are made or implied. Please check the website listed below regularly for notice of bug fixes and changes.</p>

<p>This software is intended for educational, demonstrative, and entertainment purposes only, and is not suitable for
use for control of actual railroads or other life-critical missions. The circuit designs, in particular, occasionally employ
shortcuts and simplifications not appropriate for real railroad signalling, and are not suitable for use as prototypes
for systems to control real life-critical systems. The author assumes no responsibility for any damage or harm resulting
from use or misuse. The author assumes no responsibility for errors resulting from corruption of the
distribution media or files. Compliance with any extant copyrights, patents, or other rights potentially infringed by
the commercial use, in spite of this warning, of information provided in this software or documentation, is your
responsibility alone.</p>

<p>Individuals may use and share this program as they wish, but may not
incorporate this program or its parts in any distribution, collection, or
commercial product without the consent of the author (contact means below).  Users may not modify it, but are free to
develop scenarios for it.</p>

<p><span>This software is intended for personal use and personal education, and offered free of charge under those
conditions. Business concerns and governmental organizations, rapid transit and engineering in particular, seeking to employ
this software for other than entertainment or personal education should contact the author at the address below about
licensing arrangements and possible future development.</p>

<p><b>NXSYS</b> is implemented in C++; the Microsoft Windows versions are in 32-bit (Win32) Microsoft Visual C(++), the Macintosh
version in Apple <b>clang LLVM</b> C++, 64 bit, with the user interface in Objective C++ (see the <a
href="MacNXSYS.html">Mac-specific help</a> for more detail). An original Lisp implementation
including an original compiler (on Windows) forms a part of it. The Windows versions are intended for use in modern Windows
environments, from Windows XP onward through Windows 7 and 8 (<b>NXSYS Version 1</b> works with considerably older
Windows platforms as well). This help text was prepared from original Microsoft Help Compiler source through Python scripting to HTML.</p>

<p><b>NXSYS</b> is based upon ideas and designs from the June 1, 1958 New York City
Transit Authority drawings, <b><i>NX &amp; UR Interlockings, Typical Circuits
(733-33),</i></b> which was one of the central formative documents of the
author's career. A recent gift of a
1994 733-33 has been most helpful, too. The relay-logic interlockings implemented by <b>NXSYS</b> straightforwardly implement
most, but not all, of these ideas. Neither this software nor this documentation has been authorized,
approved, or verified by the New York City Transit Authority or its successors.</p>

<p>The author conceived the ideas in the relay logic simulator/interpreter and compiler which form a large part of
<b>NXSYS</b> when he was in the employ of Symbolics, Inc., in the early 1980's. Implementation of (16-bit Windows) NXSYS was begun on 29 May 1994.</p>

<p><b>Windows, Windows XP, Windows 7</b>,<b>Windows 8</b>,
<b>Win32</b>, and <b>Visual C++</b> are trademarks of the
Microsoft Corporation. <b>Apple</b>, <b>Macintosh</b>, <b>Mac</b>, and <b>Objective C(++)</b> are trademarks of the
Apple Inc.  <b>Intel</b> is a trademark of the <b>Intel Corporation.</b>
<b>NX</b> refers to a scheme of railroad switch and signal control offered by
General Railway Signal (now part of the Alstom Corporation), and <b>UR</b>
refers to a scheme of railroad switch and signal control offered by Union
Switch and Signal Co., a division Ansaldo Trasporti. Neither this software nor its
documentation has been authorized, approved, or verified by either of these or
any other railroad signal concern.</p>

<p>The system icon is the noble visage of the Type D &quot;Triplex&quot; cars, who reigned over the BMT express runs for
forty years ending in 1964.</p>

<p>The World Wide Web site for <b>NXSYS</b>, containing the latest versions, interlockings, and modification info, as of this writing, is</p>

<p>
<blockquote>
    <a
href="http://www.nycsubway.org/wiki/NXSYS,_Signalling_and_Interlocking_Simulator">http://www.nycsubway.org/wiki/NXSYS,_Signalling_and_Interlocking_Simulator</a>
</blockquote>
</p>

<p><a name="webaddr"/>You can contact the author at the Signal section of <a href="http://nycsubway.org"/>nycsubway.org</a>.<p>

<p><b>NXSYS</b> is dedicated to Aaron Hoffman, who was but a
young railfan when he first met this program in the 1990's.</p>
<a name='author'/><h2>7.1 About the Author</h2>

<p><span>Bernard Greenberg, the author of this program, its interlockings,
and documentation, grew up in Brooklyn, NY, in the heyday of the subways, the
1950's and 1960's. Like most New
Yorkers of the time, he rode them everywhere, and, through the kindness of helpful
motormen, towermen, and the like, became an avid and knowledgeable </span>railfan<span> before he was old
enough to ride alone. He finally
made contact, as it were, with the NYCTA in 1962, and for a couple of years
regularly received boxloads of documents, maps, plans, and answers from a
railfan employee, Martin Schachne. In love with the subways, after being shown the DeKalb Avenue NX panel
he soon combined this passion with his then-largest &quot;hobby&quot;, &quot;electronics&quot;
(an old name for a precursor of computation), and increasingly zeroed in on
NYCTA signalling, culminating in a 1966 study of 733-33, the typical circuits
for NX/UR interlockings and subsequent design of a complete UR interlocking for
Atlantic Avenue (IRT) &quot;for the fun of it&quot;. Abandoning New York, the New York
Subways, and signals for graduate study, he grew up to be a successful
computerist specializing in operating system design and implementation. Creating <b>NXSYS</b> has finally allowed him to
realize his boyhood dream of design, debugging, and experimenting with NX/UR
interlockings and signal circuitry. The Internet user community of this program has fulfilled another,
namely, finding others who share his passion for this subject matter.</span></p>



<p><span>Enjoy!</span></p>
<table>
 <div id="DEF_IJ" class="DocPopup">

<p><span>A small wedge of fiber or fiberglass (previously treated wood)
placed between the ends of rails to electrically isolate one <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track section</span>
from another.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_tracksection" class="DocPopup">

<p><span>A length of track between two <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_IJ">insulated joints,</span>
typically hundreds of feet long, whose occupancy by a train, or any portion of
a train, is reckoned as an all-or-nothing proposition; a given track circuit is
either occupied or vacant at any time.</span></p>

<p><span>All track in signalled territory is divided into track-sections.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_GK" class="DocPopup">

<p><span>For &quot;Si<b>G</b>nal indi<b>K</b>ator&quot;. An indication lamp on an interlocking
control panel, associated with a given signal, that reports the state of that
signal to the tower operator. In <b>NXSYS</b>,
they are shaped like the conventional drawing symbol for a signal, while on
real NYCTA panels they are slightly smaller lights in the actual track line on
the panel. The GK light is yellow
if the signal is clear, red if it is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">called</span> but red, and dark
if it is red and not called.</span></p>

<p><span>Click right on any GK light to see a <a href="#fullsig">full
signal display</a> window showing the signal's aspect and <a href="#stops">stop</a> position. <b>NXSYS</b> provides <a href="#automatic">automatic signals</a> with GK lights;
real NX/UR panels do not.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_etoe" class="DocPopup">

<p><span>An interlocking feature which allows a tower operator to set up a
route through many switches and signals, i.e., from one end of a complex
interlocking to the other, by <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiating</span> at the entrance to the
first segment of the route and choosing the exit of the last. The interlocking selects and works
through all the intermediate manipulations automatically.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_init" class="DocPopup">

<p><span>The first gesture taken by a tower operator for lining up a route.
He or she <i>initiates</i> a route by choosing its entrance by pressing the
signal button at that point on the interlocking control panel. In <b>NXSYS,</b> this is done by
clicking left on the signal's <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_GK">GK light.</span></span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_ovlp" class="DocPopup">

<p><span>The distant portion of a signal's <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control length,</span> in
particular, the part remaining beyond the signal <i>after</i> the one being
discussed. One can think of a
signal's overlap as the region in which the train will come to a stop if the
signal indicates to proceed, but the next signal does not, and actually stops
the train.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_lever" class="DocPopup">

<p><span>In older interlockings, a physical lever operated by the towerman by
which his intent was conveyed to switches and signals. The mechanical interlocking of the
levers with each other gives interlocking its name.</span></p>

<p><span>In NX and UR interlockings, no real lever exists, for that
functionality is subsumed by <a href="#relays">relays,</a>
the tower operator's intent being conveyed indirectly by the lining up of
routes. Nevertheless, the
&quot;lever&quot; represents a conceptual call for the switch or signal, and a
switch or signal's &quot;lever number&quot; provides a convenient name for all
components associated with it.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_occ" class="DocPopup">

<p><span>A <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_tracksection">track section</span> is <i>occupied</i> when a
train, or any portion of a train, is in any portion of it. The opposite of occupied is <i>vacant.</i></span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_called" class="DocPopup">

<p><span>A <a href="#home">home signal</a> or <a href="#apsig">approach signal</a> is <i>called</i> when
the interlocking of which it is part wants it to be clear. In old interlockings, this was indicated
by the use of a physical <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_lever">lever,</span> but in NX/UR interlockings it
is accomplished by making the signal part of a route. Interlockings enforce strict conditions
on the calling of signals and the moving of switches.</span></p>

<p><span>An interlocking-controlled signal which is not called cannot be other
than red. A signal which has been
called will be clear when and if track conditions permit. Revoking the call for a signal is called
<span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_cancel">cancelling</span> it.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_clen" class="DocPopup">

<p><span>The extent of track directly ahead of a signal which must be free of
trains and other hazards (such as switches in the wrong direction or
conflicting routes) before that signal may clear. A signal will be red, indicating
&quot;stop&quot;, if there are trains or other hazards detected in any portion
of its control length.</span></p>

<p><span>This concept is absolutely central to this entire subject matter.
Please see the <a href="#clength">full discussion of control
length.</a></span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_unk" class="DocPopup">

<p><span>A white light on the interlocking panel that lights up at each
potential exit when an entrance is selected (a route is <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_init">initiated</span>). The exit light is in the line
representing the track, always near a signal.</span></p>

<p><span>In <b>NXSYS,</b> you click on an exit light to select that point as
the exit of a route.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_sno" class="DocPopup">

<p><span>A number, measured in hundreds of feet along the right-of-way,
indicating distance from some arbitrary, well-defined point. Signals and <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_IJ">insulated joints</span>
are identified with a station number.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_xlkg" class="DocPopup">

<p><span>A collection of switches (&quot;switch-tracks&quot;) and signals in
geographic proximity and their associated control equipment, designed and constrained that their
operation can only be effected in safe sequences.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_trps" class="DocPopup">

<p><span>A switch (between two tracks) that offers no choice of path to
traffic in a specified direction, i.e., the points of the switch will <i>trail</i>
behind the train as it passes over the switch in that direction.<br/><img align='center' src='fpsw.bmp'/><br/>A trailing-point switch can be set &quot;the wrong way&quot;
for motion in the given direction, i.e., such that motion over it from a given
track is impossible, i.e., will cause a derailment and/or damage to the switch.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_fleet" class="DocPopup">

<p><span>To set an <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_xlkg">interlocking</span>-controlled signal such that
many trains can pass through it at once without the towerman needing to reestablish
a route. A fleeted signal, like an <a href="#automatic">automatic signal,</a> clears
automatically a trains passes it and leaves its <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_clen">control length</span>. Normally, interlocking-controlled
signals auto-<span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_cancel">cancel</span> and stay at stop when passed by a train.</span></p>

<p><span>See <a href="#fleet">Auto-cancel and Fleeting.</a></span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

 <div id="DEF_cancel" class="DocPopup">

<p><span>To force a signal to be at stop by disestablishing the route
including it, ending the <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_called">call</span> for the signal. A towerman cancels a signal and its
route by pulling its button; a train auto-cancels a signal that is not <span onmouseenter="defenter(this);" onmouseleave="defleave();" class="def" dref="#DEF_fleet">fleeted</span>
by passing it.</span></p>

<span><br clear=all
style='page-break-before:always'>
</span>

</div>

</table>


</div>

<div id="thePopup" class="DocPopup"></div></body>

</html>
